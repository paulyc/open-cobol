@comment *********************************************************************
@comment ** 8. Interfacing With The OS                                      **
@comment *********************************************************************
@newchapter{8,Interfacing With The OS}
@menu
* 8.1: Compiling Programs.
@detailmenu
*   8.1.1: cobc - The GnuCOBOL Compiler.
*   8.1.2: Compilation Time Environment Variables.
*   8.1.3: Predefined Compilation Variables.
*   8.1.4: Locating Copybooks.
*   8.1.5: Compiler Configuration Files.
@end detailmenu
* 8.2: Running Programs.
@detailmenu
*   8.2.1: Direct Execution.
*   8.2.2: Executing Dynamically-Loadable Libraries.
*     8.2.2.1: cobcrun - Command-line Execution.
*     8.2.2.2: Dynamically Loaded Subprograms.
*   8.2.3: Run Time Environment Variables.
*   8.2.4: Program Arguments.
@end detailmenu
* 8.3: Built-In System Subroutines.
* 8.4: Binary Truncation.
@end menu
@comment *********************************************************************
@comment ** 8.1 Compiling Programs                                          **
@comment *********************************************************************
@newsection{8.1,Compiling Programs}@p Program source files should have extensions of ".cob" or ".cbl".
@p Program file names should match exactly the specification of PROGRAM-ID (including case).
@p Spaces cannot be included in primary entry-point names and therefore should not be included in program file names.
@p The GnuCOBOL compiler will translate your COBOL program into C source code, compile that C source code into executable binary form using the "C" compiler specified when GnuCOBOL was built and link that executable binary into:
@table @asis
@p @item Directly executable form
@p This is an executable file directly-executable from the command-line.  On Windows computers, this would be an ".exe" file.  On Unix systems, this will be a file with no specific extension, but with execute permissions.  This file will include the main program as well as any static-linked subprograms.
@p @item Static-linkable form
@p This is a single subprogram compiled into object-code form, ready to be linked in with a main program to form a directly-executable program.  On windows computers, these generally are ".o" (object-code) files.
@p @item Dynamically-loadable executable form
@p These are dynamically-loadable object code files ready to be invoked from other programs at execution time.  On Windows systems, these would be ".dll" files, while on Unix systems they are typically ".so" files (OSX uses ".dylib").
@end table
@menu
* 8.1.1: cobc - The GnuCOBOL Compiler.
* 8.1.2: Compilation Time Environment Variables.
* 8.1.3: Predefined Compilation Variables.
* 8.1.4: Locating Copybooks.
* 8.1.5: Compiler Configuration Files.
@end menu
@comment *********************************************************************
@comment ** 8.1.1 cobc - The GnuCOBOL Compiler                             **
@comment *********************************************************************
@newsubsection{8.1.1,cobc - The GnuCOBOL Compiler}@p The GnuCOBOL compiler is named "cobc" ("cobc.exe" on a Windows system).
@p The following describes the syntax and option switches of the cobc command.  This information may be displayed by entering the command "cobc --help" or "cobc -h".
@verbatim
Usage: cobc [options]... file...

Options:
  -h, -help             display this help and exit
  -V, -version          display compiler version and exit
  -i, -info             display compiler information (build/environment)
  -v, -verbose          display compiler version and the commands
                        invoked by the compiler
  -vv, -verbose=2       like -v but additional pass verbose option
                        to assembler/compiler
  -vvv, -verbose=3      like -vv but additional pass verbose option
                        to linker
  -q, -brief            reduced displays, commands invoked not shown
  -###                  like -v but commands not executed
  -x                    build an executable program
  -m                    build a dynamically loadable module (default)
  -j [<args>], -job[=<args>]
                        run program after build, passing <args>
  -std=<dialect>        warnings/features for a specific dialect
                        <dialect> can be one of:
                        cobol2014, cobol2002, cobol85, default,
                        ibm, mvs, bs2000, mf, acu;
                        see configuration files in directory config
  -F, -free             use free source format
  -fixed                use fixed source format (default)
  -O, -O2, -Os          enable optimization
  -g                    enable C compiler debug / stack check / trace
  -d, -debug            enable all run-time error checking
  -o <file>             place the output into <file>
  -b                    combine all input files into a single
                        dynamically loadable module
  -E                    preprocess only; do not compile or link
  -C                    translation only; convert COBOL to C
  -S                    compile only; output assembly file
  -c                    compile and assemble, but do not link
  -T <file>             generate and place wide program listing into <file>
  -t <file>             generate and place a program listing into <file>
  --tlines=<lines>      specify lines per page in listing, default = 55
  --tsymbols            specify symbols in listing
  -P[=<dir or file>]    generate preprocessed program listing (.lst)
  -Xref                 specify cross reference in listing
  -I <directory>        add <directory> to copy/include search path
  -L <directory>        add <directory> to library search path
  -l <lib>              link the library <lib>
  -A <options>          add <options> to the C compile phase
  -Q <options>          add <options> to the C link phase
  -D <define>           define <define> for COBOL compilation
  -K <entry>            generate CALL to <entry> as static
  -conf=<file>          user-defined dialect configuration; see -std
  -list-reserved        display reserved words
  -list-intrinsics      display intrinsic functions
  -list-mnemonics       display mnemonic names
  -list-system          display system routines
  -save-temps[=<dir>]   save intermediate files
                        - default: current directory
  -ext <extension>      add file extension for resolving COPY

  -W                    enable all warnings
  -Wall                 enable most warnings (all except as noted below)
  -Wno-<warning>        disable warning enabled by -W or -Wall
  -Wno-unfinished       do not warn if unfinished features are used
                        - ALWAYS active
  -Wno-pending          do not warn if pending features are mentioned
                        - ALWAYS active
  -Wobsolete            warn if obsolete features are used
  -Warchaic             warn if archaic features are used
  -Wredefinition        warn incompatible redefinition of data items
  -Wconstant            warn inconsistent constant
  -Woverlap             warn overlapping MOVE items
  -Wpossible-overlap    warn MOVE items that may overlap depending on
                        variables
                        - NOT set with -Wall
  -Wparentheses         warn lack of parentheses around AND within OR
  -Wstrict-typing       warn type mismatch strictly
  -Wimplicit-define     warn implicitly defined data items
  -Wcorresponding       warn CORRESPONDING with no matching items
  -Winitial-value       warn Initial VALUE clause ignored
  -Wprototypes          warn missing FUNCTION prototypes/definitions
  -Warithmetic-osvs     warn if arithmetic expression precision has changed
  -Wcall-params         warn non 01/77 items for CALL params
                        - NOT set with -Wall
  -Wconstant-expression warn expressions that always resolve to true/false
  -Wcolumn-overflow     warn text after program-text area, FIXED format
                        - NOT set with -Wall
  -Wterminator          warn lack of scope terminator END-XXX
                        - NOT set with -Wall
  -Wtruncate            warn possible field truncation
                        - NOT set with -Wall
  -Wlinkage             warn dangling LINKAGE items
                        - NOT set with -Wall
  -Wunreachable         warn unreachable statements
                        - NOT set with -Wall
  -Werror               treat all warnings as errors
  -Werror=<warning>     treat specified <warning> as error

  -fsign=[ASCII|EBCDIC] define display sign representation
                        - default: machine native
  -ffold-copy=[UPPER|LOWER]
                        fold COPY subject to value
                        - default: no transformation
  -ffold-call=[UPPER|LOWER]
                        fold PROGRAM-ID, CALL, CANCEL subject to value
                        - default: no transformation
  -fdefaultbyte=0..255 or any quoted character
                        initialize fields without VALUE to decimal value
                        - default: initialize to picture
  -fmax-errors=<number> maximum number of errors to report
                        - default: 100
  -fintrinsics=[ALL|intrinsic function name(,name,...)]
                        intrinsics to be used without FUNCTION keyword
  -ftrace               generate trace code
                        - executed SECTION/PARAGRAPH
  -ftraceall            generate trace code
                        - executed SECTION/PARAGRAPH/STATEMENTS
                        - turned on by -debug
  -fsyntax-only         syntax error checking only; don't emit any output
  -fdebugging-line      enable debugging lines
                        - 'D' in indicator column or floating >>D
  -fsource-location     generate source location code
                        - turned on by -debug/-g/-ftraceall
  -fimplicit-init       automatic initialization of the COBOL runtime system
  -fstack-check         PERFORM stack checking
                        - turned on by -debug or -g
  -fsyntax-extension    allow syntax extensions
                        - e.g. switch name SW1, etc.
  -fwrite-after         use AFTER 1 for WRITE of LINE SEQUENTIAL
                        - default: BEFORE 1
  -fmfcomment           '*' or '/' in column 1 treated as comment
                        - FIXED format only
  -facucomment          '$' in indicator area treated as '*',
                        '|' treated as floating comment
  -fnotrunc             allow numeric field overflow
                        - non-ANSI behaviour
  -fodoslide            adjust items following OCCURS DEPENDING
                        - requires implicit/explicit relaxed syntax
  -fsingle-quote        use a single quote (apostrophe) for QUOTE
                        - default: double quote
  -frecursive-check     check recursive program call
  -foptional-file       treat all files as OPTIONAL
                        - unless NOT OPTIONAL specified
  -ftab-width=1..12     set number of spaces that are asumed for tabs
  -ftext-column=72..255 set right margin for source (fixed format only)
  -fpic-length=<number> maximum number of characters allowed in the
                        character-string
  -fword-length=1..61   maximum word-length for COBOL words / Programmer
                        defined words
  -fliteral-length=<number>
                        maximum literal size in general
  -fnumeric-literal-length=1..38
                        maximum numeric literal size
  -fassign-clause=<value>
                        set way of interpreting ASSIGN
  -fbinary-size=<value> binary byte size - defines the allocated bytes
                        according to PIC
  -fbinary-byteorder=<value>
                        binary byte order
  -ffilename-mapping    resolve file names at run time using environment
                        variables.
  -fpretty-display      alternate formatting of numeric fields
  -fbinary-truncate     numeric truncation according to ANSI
  -fcomplex-odo         allow complex OCCURS DEPENDING ON
  -findirect-redefines  allow REDEFINES to other than last equal level number
  -flarger-redefines-ok allow larger REDEFINES items
  -frelax-syntax-checks allow certain syntax variations (e.g. REDEFINES
                        position)
  -fperform-osvs        exit point of any currently executing perform is
                        recognized if reached
  -farithmetic-osvs     limit precision in intermediate results to precision
                        of final result
  -fmove-ibm            MOVE operates as on IBM (left to right, byte by byte)
  -fsticky-linkage      LINKAGE-SECTION items remain allocated between
                        invocations
  -frelax-level-hierarchy
                        allow non-matching level numbers
  -fhostsign            allow hexadecimal value 'F' for NUMERIC test of signed
                        PACKED DECIMAL field
  -faccept-update       set WITH UPDATE clause as default for ACCEPT dest-item,
                        instead of WITH NO UPDATE
  -faccept-auto         set WITH AUTO clause as default for ACCEPT dest-item,
                        instead of WITH TAB
  -fconsole-is-crt      assume CONSOLE IS CRT if not set otherwise
  -fprogram-name-redefinition
                        program names don't lead to a reserved identifier
  -fno-echo-means-secure
                        NO-ECHO hides input with asterisks like SECURE
  -fcomment-paragraphs=<support>
                        comment paragraphs in IDENTIFICATION DIVISION (AUTHOR,
                        DATE-WRITTEN, ...)
  -fmemory-size-clause=<support>
                        MEMORY-SIZE clause
  -fmultiple-file-tape-clause=<support>
                        MULTIPLE-FILE-TAPE clause
  -flabel-records-clause=<support>
                        LABEL-RECORDS clause
  -fvalue-of-clause=<support>
                        VALUE-OF clause
  -fdata-records-clause=<support>
                        DATA-RECORDS clause
  -ftop-level-occurs-clause=<support>
                        OCCURS clause on top-level
  -fsynchronized-clause=<support>
                        SYNCHRONIZED clause
  -fgoto-statement-without-name=<support>
                        GOTO statement without name
  -fstop-literal-statement=<support>
                        STOP-literal statement
  -fstop-identifier-statement=<support>
                        STOP-identifier statement
  -fdebugging-line=<support>
                        DEBUGGING MODE and indicator 'D'
  -fuse-for-debugging=<support>
                        USE FOR DEBUGGING
  -fpadding-character-clause=<support>
                        PADDING CHARACTER clause
  -fnext-sentence-phrase=<support>
                        NEXT SENTENCE phrase
  -flisting-statements=<support>
                        listing-directive statements EJECT, SKIP1, SKIP2,
                        SKIP3
  -ftitle-statement=<support>
                        listing-directive statement TITLE
  -fentry-statement=<support>
                        ENTRY statement
  -fmove-noninteger-to-alphanumeric=<support>
                        move noninteger to alphanumeric
  -fodo-without-to=<support>
                        OCCURS DEPENDING ON without to
  -fsection-segments=<support>
                        section segments
  -falter-statement=<support>
                        ALTER statement
  -fcall-overflow=<support>
                        OVERFLOW clause for CALL
  -fnumeric-boolean=<support>
                        boolean literals (B'1010')
  -fhexadecimal-boolean=<support>
                        hexadecimal-boolean literals (BX'A')
  -fnational-literals=<support>
                        national literals (N'UTF-16 string')
  -fhexadecimal-national-literals=<support>
                        hexadecimal-national literals (NX'265E')
  -facucobol-literals=<support>
                        ACUCOBOL-GT literals (#B #O #H #X)
  -fword-continuation=<support>
                        continuation of COBOL words
  -fnot-exception-before-exception=<support>
                        NOT ON EXCEPTION before ON EXCEPTION
  -faccept-display-extensions=<support>
                        extensions to ACCEPT and DISPLAY
  -frenames-uncommon-levels=<support>
                        RENAMES of 01-, 66- and 77-level items
  -fconstant-78=<support>
                        constant with level 78 item (note: has left to right
                        precedence in expressions)
  -fconstant-01=<support>
                        constant with level 01 CONSTANT AS/FROM item
  -fprogram-prototypes=<support>
                        CALL/CANCEL with program-prototype-name
  -freference-out-of-declaratives=<support>
                        references to sections not in DECLARATIVES from within
                        DECLARATIVES
  -fnumeric-value-for-edited-item=<support>
                        numeric literals in VALUE clause of numeric-edited
                        items
  -fincorrect-conf-sec-order=<support>
                        incorrect order of CONFIGURATOIN SECTION paragraphs
  -fdefine-constant-directive=<support>
                        allow >> DEFINE CONSTANT var AS literal
        where <support> is one of the following:
                       'ok', 'warning', 'archaic', 'obsolete', 'skip',
                       'ignore', 'error', 'unconformable'
  -fnot-reserved=<word> word to be taken out of the reserved words list
  -freserved=<word>     word to be added to reserved words list
  -freserved=<word>:<alias>
                        word to be added to reserved words list as alias
@end verbatim
@anchor{Compilation Unit}
@* Each file specified on the @syntax{cobc} command constitutes a @define{Compilation Unit}.  A compilation unit may be a single GnuCOBOL program --- with or without nested subprograms(@pxref{Independent vs Contained vs Nested Subprograms}) --- or multiple GnuCOBOL programs, separated by @syntax{END PROGRAM} or @syntax{END FUNCTION} marker lines, as appropriate.  @xref{Independent vs Contained vs Nested Subprograms}, for some examples of these marker lines.
@p A compilation unit may also be a C-language source program, recognized as such by having a file extension of @syntax{.c} or an assembly-language program, recognized by its file extension of ".s".  In such a case, @i{COBOL} compilation of that file will be bypassed by the @syntax{cobc} command; instead, the file will be passed directly to the C compiler or assembler (executed automatically by @syntax{cobc}).
@p A compilation unit may @i{also} be an object-code module (output @i{from} the C compiler), recognized as such by having a file extension of @syntax{.o}.  In these situations, all compilation will be bypassed, and the object code will be "bound" into the generated executable by the loader (an "ld" command executed internally by the @syntax{cobc} command).
@p Pre-compiled object-code subprograms may be automatically located by the GnuCOBOL compiler and the loader by using the @envvarcompile{LD_LIBRARY_PATH}.  If they are locatable through that environment variable, they need not be named on the @syntax{cobc} command.
@anchor{Compilation Group}@p The collection of compilation units supplied on a @i{single} @syntax{cobc} execution constitute a @define{Compilation Group}.  All executable code produced from a single compilation group will be collected together into a single executable file, whose filename will be the same as that of the first compilation unit specified on the @syntax{cobc} command.
@p The simplest mode of compilation is to generate a single executable file from one or more GnuCOBOL source files:
@p @center @syntax{cobc -x mainprog.cbl sub1.cbl sub2.cbl}
@p The main program must be the first program found in the first compilation unit ("mainprog.cbl").  The remainder of that compilation unit as well as the rest of the files in the compilation group ("sub1.cbl" and "sub2.cbl") must be independent and/or contained subprograms (@pxref{Independent vs Contained vs Nested Subprograms}).
@p This command assumes that all source files are in the directory from which the @syntax{cobc} command was executed.  You are, of course, free to include full pathnames with any filename, if necessary.
@p With the @switchidx{-x} on the compiler command, a single directly-executable executable file (UNIX, Windows/Cygwin, OSX) or "exe" file (Windows, Windows/MinGW) will be generated.  This executable file has the compiled code for all COBOL programs contained within the compilation group specified on the @syntax{cobc} command included in the file.
@p Any subroutines or user-defined functions that weren't included in any of the source files comprising the compilation group will be treated as dynamically loadable subprograms (@pxref{Dynamic vs Static Subprograms}).
@p Optionally, the @switchidx{-o} may be used in addition to @syntax{-x} to specify the name of the generated executable file.  If @switch{-o} is not specified, the filename of the 1st compilation unit will be used as the name of the executable file.  The appropriate extension for the generated file (".exe", on a Windows computer, for example) will be added to the filename that is explicitly specified or implicitly assumed for the output file.
@p Compilations may be performed to generate dynamically-loadable modules (or dynamically-loadable libraries, as they are frequently called).  These compilations are performed by using the @switchidx{-m} instead of @switch{-x}:
@p @center @syntax{cobc -m mainprog.cbl sub1.cbl sub2.cbl}
@p When the @syntax{-m} switch is used, an operating-system specific dynamically-loadable module is generated @i{for each individual compilation unit}, using the filename of each compilation unit as the it's module filename and either an extension of ".so" (UNIX, Windows/Cygwin), "dylib" (OSX) or ".dll" (Windows, Windows/MinGW).
@p You may compile GnuCOBOL subprograms into assembler source code which can then be assembled and linked with a main program when that main program is compiled.  To create such an assembler source file, compile the subprogram(s) as follows:
@p @center @syntax{cobc -S sprog1.cbl}
@p The above generates an assembler source file named "sprog1.s".  If you have multiple subprograms to compile this way, just string their file names out on the command --- each will be translated to it's own assembler source file.
@p Later, when you wish to compile a calling program and combine any needed assembly language subroutines in (as static subroutines --- @pxref{Dynamic vs Static Subprograms}), use a command such as this:
@p @center @syntax{cobc -x mainprog.cbl sprog1.s}
@comment *********************************************************************
@comment ** 8.1.2 Compilation Time Environment Variables                    **
@comment *********************************************************************
@newsubsection{8.1.2,Compilation Time Environment Variables}@anchoridx{Environment Variables: Compilation-Time}
@p The following are the various environment variables that can play a role in the compilation of GnuCOBOL programs.
@table @asis
@p @item @syntaxidx{COB_CC} *
@p Set to the name of the C compiler you wish GnuCOBOL to use.
@p USE THIS FEATURE AT YOUR OWN RISK -- YOU SHOULD ALWAYS USE THE C COMPILER YOUR GnuCOBOL BUILD WAS GENERATED FOR
@p @item @syntaxidx{COB_CFLAGS} *
@p Set to any switches that you'd like to pass on to the C compiler from the @syntax{cobc} compiler (in addition to any that @syntax{cobc} will specify).
@p @item @syntaxidx{COB_CONFIG_DIR} *
@p Set to the path to the folder where GnuCOBOL "config" files are kept.
@p @item @syntaxidx{COB_COPY_DIR} *
@p If copybooks your program needs are NOT stored in the same directory as your program, set this environment variable to the folder in which the copybooks may be found (IBM mainframe programmers will recognize this as "SYSLIB").
@p @item @syntaxidx{COB_LDADD}
@p Set to any additional linker switches (ld) that can specify where standard libraries that must be linked with the program can be found.  The default is "" (null).
@p @item @syntaxidx{COB_LDFLAGS}
@p Set to any linker/loader (ld) switches that you'd like to pass on to the C compiler from the @syntax{cobc} compiler (in addition to any that cobc will specify).
@p @item @syntaxidx{COB_LIBS} *
@p Set to any linker switches (ld) that specify where standard libraries that must be linked with the program can be found.
@p @item @syntaxidx{COBCPY}
@p This environment variable provides an additional means of specifying where copybooks may be found by the compiler (see also COB_COPY_DIR, above).
@p @item @syntaxidx{LD_LIBRARY_PATH}
@p If you are planning on using static-linked subroutine libraries, set this variable to the path of the directory containing your libraries.
@p @item @syntaxidx{TMPDIR}
@itemx @syntaxidx{TMP}
@p Set to a directory/folder appropriate to create temporary files in.  The intermediate working files created by the compiler will be created here (and deleted once they're no longer needed).
@p The variable @syntax{TMPDIR} is checked for a valid path first; if that isn't set, then @syntax{TMP} is checked.
@p On a Windows system, the @syntax{TMP} environment variable is normally set for you when you logon.  If you wish to use a different temporary folder, you may set @syntax{TMPDIR} yourself and have no fear of disrupting other Windows software that relies on TMP.
@end table
@multitable @columnfractions 0.01 0.99
@p @item * @tab These environment variables have default values established for them when the version of GnuCOBOL you are using was built.  To see these default values, as well as other build-specific information, execute the command:
@p @center @syntax{cobc -i}
@end multitable
@comment *********************************************************************
@comment ** 8.1.3 Predefined Compilation Variables                          **
@comment *********************************************************************
@newsubsection{8.1.3,Predefined Compilation Variables}
@p GnuCOBOL defines compilation variables when certain conditions are true.
@p If the condition associated with a variable is false, the variable is not defined during compilations.
@verbatim

Name              Condition
DEBUG             The -d debug flag is specified.
EXECUTABLE        The module being compiled contains the main program.
GCCOMP            The size of a COMP item is determined according to the GnuCOBOL
                  scheme, where for a PICTURE of length:
                     1-2,   the item has 1 byte
                     3-4,   the item has 2 bytes
                     5-9,   the item has 4 bytes
                     10-18, the item has 8 bytes.
GNUCOBOL          GnuCOBOL is compiling the source unit.
HOSTSIGNS         A signed packed-decimal item’s value may be considered NUMERIC
                  if the sign has value X"F".
IBMCOMP           The size of a COMP item is determined according to the IBM
                   scheme, where for a PICTURE of length:
                     1-4,   the item has 2 bytes
                     5-9,   the item has 4 bytes
                     10-18, the item has 8 bytes.
MODULE            The module being compiled does not contain the main program.
NOHOSTSIGNS       A signed packed-decimal item’s value may not be considered
NUMERIC           if the sign has value X"F".
NOIBMCOMP         The size of a COMP item is not determined according to the IBM
                  scheme.
NOSTICKYLINKAGE   Sticky-linkage (linkage-section items remaining allocated
                  between invocations) is not enabled.
NOTRUNC           Numeric data items are truncated according to their internal
                  representation.
P64               Pointers are greater than 32 bits long
STICKY-LINKAGE    Sticky-linkage (linkage-section items remaining allocated
                  between invocations) is enabled.
TRUNC             Numeric data items are truncated according to their PICTURE
                  clauses.

@end verbatim
@comment *********************************************************************
@comment ** 8.1.4 Locating Copybooks                                        **
@comment *********************************************************************
@newsubsection{8.1.4,Locating Copybooks}
@p The GnuCOBOL compiler will attempt to locate copybooks by searching for them in the following folders.  The search will occur in the sequence shown below, and will terminate once a copybook is found.
@enumerate
@p @item The folder named as the @term{library-name-1} on the @statementref{COPY}.
@p @item The folder in which the program being compiled resides.
@p @item The folder named on the @switchidx{-I}.
@p @item Each of the folders named on the @envvarcompile{COBCPY}.
@p A single folder may be named or multiple folders may be specified, separated by a system-appropriate delimiter character.  When multiple folders are specified, they will be searched in the order they are named on the environment variable.
@p If the GnuCOBOL compiler you are using was built to utilize a native Windows environment, use a semicolon (;) as the delimiter character.
@p If, however, the GnuCOBOL compiler was built for a Unix, OSX or Linux environment, or was built for a Windows environment utilizing either the Cygwin or MinGW Unix emulators, use a colon character (:) as the delimiter.
@p @item The @i{single} folder specified on the COB_COPY_DIR environment variable.
@end enumerate
@p As each of the above folders is searched for a copybook --- @syntax{COPY XXXXXXXX.}, for example --- the GnuCOBOL compiler will attempt to locate the copybook file by any of the following names, in the sequence shown:
@enumerate
@p @item XXXXXXXX.CPY
@p @item XXXXXXXX.CBL
@p @item XXXXXXXX.COB
@p @item XXXXXXXX.cpy
@p @item XXXXXXXX.cbl
@p @item XXXXXXXX.cob
@p @item XXXXXXXX
@end enumerate
@* The @statement{COPY} is case-sensitive on UNIX systems; @syntax{COPY copybookname} and @syntax{COPY COPYBOOKNAME} will both fail to locate the @syntax{CopyBookName} copybook on a UNIX system.
@p Windows implementations of GnuCOBOL may, or may not, be similarly case sensitive with regard to copybook names, depending upon the Windows version and GnuCOBOL build options --- it is safest to simply treat the COPY command as case-sensitive in all environments.
@p It is possible, however, to automatically cause all @statement{COPY}s to 'fold' the names of all copybooks to upper-case by specifying the @switchidx{-ffold-copy} with the "upper" option (i.e. @syntax{--fold-copy=upper}) to the GnuCOBOL compiler.  Similarly, names could be folded to lower-case by using the "lower" option (i.e. @syntax{--fold-copy=lower}.  If copybook libraries are maintained entirely using upper- or lower-case file names and extensions, either of these options will allow copybooks to be found regardless of how the programmer entered their names on @statement{COPY}s.
@p Case-folding may also be turned on and off within the program source code using the CDF @statementref{>>SET}.
@comment *********************************************************************
@comment ** 8.1.5 Compiler Configuration Files                              **
@comment *********************************************************************
@newsubsection{8.1.5,Compiler Configuration Files}@p GnuCOBOL uses compiler configuration files to define various options that will control the compilation process.  These configuration files are specified using the @switchidx{-conf} compilation switch and are found in the folder defined by the @envvarcompile{COB_CONFIG_DIR}.
@p If this is not defined under *nix it will default to /usr/local/share/gnucobol/config.
@p The following is a verbatim listing of the "default" configuration file (the one used if you don't specify the @switch{-conf}), just to show you the types of settings that may appear:
@verbatim
# GnuCOBOL compiler configuration
#
# Copyright (C) 2001-2012, 2014-2017 Free Software Foundation, Inc.
# Written by Keisuke Nishida, Roger While, Simon Sobisch, Edward Hart
#

# Value: any string
name: "GnuCOBOL"

# Value: enum
standard-define                 0
#        CB_STD_OC = 0,
#        CB_STD_MF,
#        CB_STD_IBM,
#        CB_STD_MVS,
#        CB_STD_BS2000,
#        CB_STD_ACU,
#        CB_STD_85,
#        CB_STD_2002,
#        CB_STD_2014

# Value: int
tab-width:                      8
text-column:                    72
# Maximum word-length for COBOL words / Programmer defined words
# Be aware that GC checks the word length against COB_MAX_WORDLEN
# first (currently 61)
word-length:                    61

# Maximum literal size in general
literal-length:                 8191

# Maximum numeric literal size (absolute maximum: 38)
numeric-literal-length: 38

# Maximum number of characters allowed in the character-string (max. 255)
pic-length:                             255

# Value: 'mf', 'ibm'
#
assign-clause:                  mf

# If yes, file names are resolved at run time using
# environment variables.
# For example, given ASSIGN TO "DATAFILE", the file name will be
#  1. the value of environment variable 'DD_DATAFILE' or
#  2. the value of environment variable 'dd_DATAFILE' or
#  3. the value of environment variable 'DATAFILE' or
#  4. the literal "DATAFILE"
# If no, the value of the assign clause is the file name.
#
filename-mapping:               yes

# Alternate formatting of numeric fields
pretty-display:                 yes

# Allow complex OCCURS DEPENDING ON
complex-odo:                    no

# Allow REDEFINES to other than last equal level number
indirect-redefines:             no

# Binary byte size - defines the allocated bytes according to PIC
# Value:         signed  unsigned  bytes
#                ------  --------  -----
# '2-4-8'        1 -  4    same        2
#                5 -  9    same        4
#               10 - 18    same        8
#
# '1-2-4-8'      1 -  2    same        1
#                3 -  4    same        2
#                5 -  9    same        4
#               10 - 18    same        8
#
# '1--8'         1 -  2    1 -  2      1
#                3 -  4    3 -  4      2
#                5 -  6    5 -  7      3
#                7 -  9    8 -  9      4
#               10 - 11   10 - 12      5
#               12 - 14   13 - 14      6
#               15 - 16   15 - 16      7
#               17 - 18   17 - 18      8
#
binary-size:                    1-2-4-8

# Numeric truncation according to ANSI
binary-truncate:                yes

# Binary byte order
# Value: 'native', 'big-endian'
binary-byteorder:               big-endian

# Allow larger REDEFINES items
larger-redefines-ok:            no

# Allow certain syntax variations (eg. REDEFINES position)
relax-syntax-checks:            no

# Perform type OSVS - If yes, the exit point of any currently
# executing perform is recognized if reached.
perform-osvs:                   no

# Compute intermediate decimal results like IBM OSVS
arithmetic-osvs:                no

# MOVE like IBM (mvc); left to right, byte by byte
move-ibm:               no

# If yes, linkage-section items remain allocated
# between invocations.
sticky-linkage:                 no

# If yes, allow non-matching level numbers
relax-level-hierarchy:          no

# If yes, evaluate constant expressions at compile time
constant-folding:               yes

# Allow Hex 'F' for NUMERIC test of signed PACKED DECIMAL field
hostsign:                       no

# If yes, set WITH UPDATE clause as default for ACCEPT dest-item,
# except if WITH NO UPDATE clause is used
accept-update:                  no

# If yes, set WITH AUTO clause as default for ACCEPT dest-item,
# except if WITH TAB clause is used
accept-auto:                    no

# If yes, DISPLAYs and ACCEPTs are, by default, done on the CRT (i.e.,
# using curses).
console-is-crt:                 no

# If yes, allow redefinition of the current program's name. This prevents
# its use in a prototype-format CALL/CANCEL statement.
program-name-redefinition:      yes

# If yes, NO ECHO/NO-ECHO/OFF is the same as SECURE (hiding input with
# asterisks, not spaces).
no-echo-means-secure:           no

# Dialect features
# Value: 'ok', 'warning', 'archaic', 'obsolete', 'skip', 'ignore', 'error',
#        'unconformable'

alter-statement:                        obsolete
comment-paragraphs:                     obsolete
call-overflow:                          archaic
data-records-clause:                    obsolete
debugging-mode:                         ok
use-for-debugging:                      obsolete
listing-statements:                     skip  # may be a user-defined word
title-statement:                        skip  # may be a user-defined word
entry-statement:                        ok
goto-statement-without-name:            obsolete
label-records-clause:                   obsolete
memory-size-clause:                     obsolete
move-noninteger-to-alphanumeric:        error
move-figurative-constant-to-numeric:    archaic
move-figurative-quote-to-numeric:       obsolete
multiple-file-tape-clause:              obsolete
next-sentence-phrase:                   archaic
odo-without-to:                         warning
padding-character-clause:               obsolete
section-segments:                       ignore
stop-literal-statement:                 obsolete
stop-identifier-statement:              obsolete
synchronized-clause:                    ok
top-level-occurs-clause:                ok
value-of-clause:                        obsolete
numeric-boolean:                        ok
hexadecimal-boolean:                    ok
national-literals:                      ok
hexadecimal-national-literals:          ok
acu-literals:                   unconformable
word-continuation:                      warning
not-exception-before-exception:         ok
accept-display-extensions:              ok
renames-uncommon-levels:                ok
constant-01:                            ok
constant-78:                            ok
program-prototypes:                     ok
reference-out-of-declaratives:          warning
numeric-value-for-edited-item:          ok
incorrect-conf-sec-order:               warning
define-constant-directive:              archaic


# use complete word list; synonyms and exceptions are specified below
reserved-words:         default

# not-reserved:
# Value: Word to be taken out of the reserved words list
not-reserved:   TERMINAL

# reserved:
# Entries of the form word-1=word-2 define word-1 as an alias for default
# reserved word word-2. No spaces are allowed around the equal sign.
reserved:       AUTO-SKIP=AUTO
reserved:       AUTOTERMINATE=AUTO
reserved:       BACKGROUND-COLOUR=BACKGROUND-COLOR
reserved:       BEEP=BELL
reserved:       BINARY-INT=BINARY-LONG
reserved:       BINARY-LONG-LONG=BINARY-DOUBLE
reserved:       EMPTY-CHECK=REQUIRED
reserved:       EQUALS=EQUAL
reserved:       FOREGROUND-COLOUR=FOREGROUND-COLOR
reserved:       INITIALISE=INITIALIZE
reserved:       INITIALISED=INITIALIZED
reserved:       LENGTH-CHECK=FULL
reserved:       ORGANISATION=ORGANIZATION
reserved:       SYNCHRONISED=SYNCHRONIZED
reserved:       TIMEOUT=TIME-OUT

@end verbatim
@comment *********************************************************************
@comment ** 8.2 Running Programs                                            **
@comment *********************************************************************
@newsection{8.2,Running Programs}@p Once GnuCOBOL programs have been compiled into either directly-executable programs (created via the @switch{-x}) or dynamically-loadable libraries (created via the @switch{-m}), those programs may be executed from any shell environment.  The exact manner in which the two are executed will differ, as described in the upcoming sections.
@menu
* 8.2.1: Direct Execution.
* 8.2.2: Executing Dynamically-Loadable Libraries.
@detailmenu
*   8.2.2.1: cobcrun - Command-line Execution.
*   8.2.2.2: Dynamically Loaded Subprograms.
@end detailmenu
* 8.2.3: Run Time Environment Variables.
* 8.2.4: Program Arguments.
@end menu
@comment *********************************************************************
@comment ** 8.2.1 Direct Execution                                          **
@comment *********************************************************************
@newsubsection{8.2.1,Direct Execution}@p GnuCOBOL programs compiled with the @switchidx{-x} will be generated as directly-executable programs.  For example, a native Windows or Windows/MinGW build of GnuCOBOL will generate an ".exe" file when the @switch{-x} switch is specified to the compiler.
@p On Unix, OSX, or Windows/Cygwin builds, the @switch{-x} switch will generate an executable binary file, usually with no particular extension unless one is explicitly requested of the compiler via the @switchidx{-o}.
@p On a UNIX system this means the programs may be executed from a command shell such as bash, csh, ksh and so forth.  When a GnuCOBOL program runs on a Windows system, it runs within a console window (i.e. "cmd.exe").  OSX versions of GnuCOBOL programs run within a "terminal.app" window.
@p Interactions between the program and the user will take place using the standard input, standard output and standard error streams.  Any screen section I/O performed by the program will take place within the command shell "window".
@p Direct program execution syntax is as follows:
@p @center @syntax{[@i{path}]@i{program} [@i{arguments}]}
@p For example:
@p @center @syntax{/usr/local/printaccount ACCT=6625378}
@p @center or
@p @center @syntax{C:\\Users\\Me\\Documents\\Programs\\printaccount.exe ACCT=6625378}
@comment *********************************************************************
@comment ** 8.2.2 Executing Dynamically-Loadable Libraries                  **
@comment *********************************************************************
@newsubsection{8.2.2,Executing Dynamically-Loadable Libraries}@p As discussed previously, dynamically-loadable libraries are created via the compiler's @switch{-m}.  Once so created, the program(s) in these libraries are executed from the command line (via the GnuCOBOL @syntax{cobcrun} utility), or as dynamically-loadable subprograms.
@menu
* 8.2.2.1: cobcrun - Command-line Execution.
* 8.2.2.2: Dynamically Loaded Subprograms.
@end menu
@comment *********************************************************************
@comment ** 8.2.2.1 cobcrun - Command-line Execution                        **
@comment *********************************************************************
@newunit{8.2.2.1,cobcrun - Command-line Execution}@p It is possible to generate executable modules for all GnuCOBOL programs, not just subprograms, by choosing to use the @switchidx{-m} option to specify the loader output format, even for main programs.
@p Some may prefer to compile their GnuCOBOL main programs into these dynamically-loadable modules in the interests of using the same general compilation command for all programs without having to think "Is it a main program or a subprogram?".
@p Main programs compiled in this manner should be executed as follows:
@p @center @syntax{[@i{path}]cobcrun @i{program} [@i{arguments}]}
@p Do not specify the ".so" or ".dll" extension on the program name.  The @i{program} value must exactly match the primary entry-point name of the main program (including upper- and lower-case letters), unless you are planning on using "Call Folding" (@pxref{Dynamically Loaded Subprograms}).
@p The general usage and syntax of cobcrun is as follows as issued by running cobcrun -h (or --help) :
@verbatim
COBOL driver program for GnuCOBOL modules

Usage: cobcrun [options] PROGRAM [parameter ...]
  or:  cobcrun options

Options:
  -h, -help                      display this help and exit
  -V, -version                   display cobcrun and runtime version and exit
  -i, -info                      display runtime information (build/environment)
  -c <file>, -config=<file>      set runtime configuration from <file>
  -r, -runtime-conf              display current runtime configuration
                                 (value and origin for all settings)
  -M <module>, -module=<module>  set entry point module name and/or load path
                                 where -M module prepends any directory to the
                                 dynamic link loader library search path
                                 and any basename to the module preload list
                                 (COB_LIBRARY_PATH and/or COB_PRELOAD)
@end verbatim
@* Here are two examples of using @syntax{cobcrun}.  First, on a Unix, OSX or Windows/Cygwin system:
@p @example
cd /usr/local
cobcrun printaccount acct=6625378
@end example
@* Or, on a Native Windows or Windows/MinGW system:
@p @example
cd C:\Users\Me\Documents\Programs
cobcrun printaccount.exe acct=6625378
@end example
@* Note how the @syntax{cobcrun} command does not allow a path to be specified with the program name --- the directory in which the programs dynamically loadable module exists must either be the current directory or must be defined in the current PATH.
@comment *********************************************************************
@comment ** 8.2.2.2 Dynamically Loaded Subprograms                          **
@comment *********************************************************************
@newunit{8.2.2.2,Dynamically Loaded Subprograms}@p Dynamically-loaded subprograms are executed (from a COBOL syntax point of view) just like any other subprograms.  What makes them unique, however, is that they are loaded into memory only when they are actually used the first time during the execution of a program.
@p When a dynamically-loadable module needs to be loaded (because it is not already in memory from a previous subprogram execution), the dynamically-loadable library will be sought in the same directory from which the main program was loaded.  If it cannot be found there, each directory named in the @envvarruntimeref{PATH} will be searched.  If it was not located in any of those directories, the library specified by the @envvarruntime{COB_LIBRARY_PATH} will be searched.  Finally, if it @i{still} cannot be located, execution will be terminated with an error message ("libcob: Cannot find module 'xxxxxxxx'").
@p The process of locating dynamically-loadable modules is case-sensitive on UNIX systems; @syntax{CALL "dynsub"} and @syntax{CALL "DYNSUB"} will both fail to locate the @syntax{DynSub.so} library on a UNIX system.
@p Windows implementations of GnuCOBOL may, or may not, be similarly case sensitive with regard to library names, depending upon the Windows version and GnuCOBOL build options --- it is safest to simply treat library names as case-sensitive in all environments.
@p It is possible, however, to automatically cause all library names to 'fold' to upper-case by specifying the @switchidx{-ffold-call} with the "upper" option (i.e. @syntax{--fold-call=upper}) to the GnuCOBOL compiler.  Similarly, library names could be folded to lower-case by using the "lower" option (i.e. @syntax{--fold-call=lower}.  If libraries are maintained entirely using upper- or lower-case file names, either of these options will allow libraries to be found regardless of how the programmer entered their names on @statement{CALL}s.
@p @xref{Sub-Programming}, for a complete discussion of sub-programming.
@comment *********************************************************************
@comment ** 8.2.3 Run Time Environment Variables                            **
@comment *********************************************************************
@newsubsection{8.2.3,Run Time Environment Variables}@anchoridx{Environment Variables: Run-Time}@p The following is a list of the various environment variables that can play a role in the execution of GnuCOBOL programs.
@table @asis
@p @item @syntaxidx{COB_DISPLAY_WARNINGS}
@p If set to a value of "Y", any run-time warnings (such as noting the implicit closing of open files when a @statementref{GOBACK} or @statementref{STOP} with the @syntax{RUN} option is executed) will be displayed.  Any other value for this environment variable (including not setting the variable at all) will suppress such messages.
@p @item @syntaxidx{COB_LIBRARY_PATH}
@p At runtime, GnuCOBOL will attempt to locate and load any application dynamically-loadable libraries using from the directory in which the program executable was found or, if it wasn't found there, using the @syntax{PATH} environment variable.  If these library files could be somewhere else, specify the directory path using this variable.
@p @item @syntaxidx{COB_LOAD_CASE}
@p If set to either @syntax{UPPER} or @syntax{LOWER}, this environment variable will internally convert referenced entry-point names to either upper- or lower-case before initiating searches for dynamically-loadable modules.  The @syntax{UPPER} and @syntax{LOWER} values of the environment variable are actually case-insensitive.
@p @item @syntaxidx{COB_PHYSICAL_CANCEL}
@p If set to "Y", "y" or "1", a @statementref{CANCEL} will physically unload a subprogram dynamically-loadable module.
@p If set to anything else, a @statementref{CANCEL} logically unloads a module so that subsequent use will re-initialize the module as if it had actually been reloaded, but the overhead of actually reloading the module will be avoided.
@p @item @syntaxidx{COB_PRE_LOAD}
@p If set to any non-null value, this variable will cause all dynamically-loadable libraries to be loaded when the program begins execution (rather than searching for and loading the module upon first use).
@p @item @syntaxidx{COB_SET_DEBUG}
@p If a @syntaxrefalt{USE FOR DEBUGGING,DECLARATIVES} section exists, the code within it will be disabled unless this environment variable is set to a value of "Y", "y" or "1".
@p @item @syntaxidx{COB_SET_TRACE}
@p If the @switchidx{-ftrace} (trace procedures) or @switchidx{-ftraceall} (trace procedures and statements) was used when the program was compiled, setting this environment variable to a value of "Y" will activate the trace at the point the program begins execution.  Setting this environment variable to any other value (or never setting it to ANY value) will disable tracing.
@p Tracing, if configured by one of the two switches described above, can also be controlled via the the @statementref{READY TRACE} and @statementref{RESET TRACE}.
@p If COB_SET_TRACE is set to Y, then tracing will always occur regardless of the presence of READY TRACE or RESET TRACE so in effect they will have no action on program execution.
@p @item @syntaxidx{COB_SCREEN_ESC}
@p If set to any non-blank value, this variable allows a @statementref{ACCEPT screen-data-item} to detect the "Esc" key.
@p @item @syntaxidx{COB_SCREEN_EXCEPTIONS}
@p Setting this variable to any non-blank value will allow the @statementref{ACCEPT screen-data-item} to detect the pressing of the "Esc", "PgUp" and "PgDn" keys.
@p @item @syntaxidx{COB_SORT_MEMORY}
@p The value of this variable (an integer) will be used to define how much memory will be allocated for use in sorting.  If the value is 1048576 or greater, that value will be used "as is" as the amount of memory (in bytes) to allocate.  If the value is less than 1048576, the value will specify how many MB of memory will be allocated.  The default sort memory amount is 128 MB.
@p @item @syntaxidx{COB_SWITCH_n}
@p (n=0 to 15); These environment variables correspond to @syntax{SWITCH-0} through @syntax{SWITCH-15}, defined in the @syntaxref{SPECIAL-NAMES} paragraph.  Setting them to "ON" will activate them; any other value turns them off.
@p @item @syntaxidx{COB_SYNC}
@p If set to a value of upper- or lower-case "p", this variable will force a file commit every time a file is written to (ensuring that data is immediately written to the file rather than retained in memory until a future commit occurs).  This will slow-down update access to files, but will provide for better integrity in the event of a program failure.
@p @item @syntaxidx{COB_TRACE_FILE}
@p If set to any non-null value, this environment variable specifies the file to which all @switch{-ftrace} and @switch{-ftraceall} output will be written.
@p If this is NOT set to a value, all @switch{-ftrace} and @switch{-ftraceall} output will be written to STDERR, where it may be piped via a "2> filename" on the command that executes the program.
@p @item @syntaxidx{DB_HOME}
@p If your GnuCOBOL build uses the Berkeley Database (BDB) package, use this environment variable to specify the folder in which the lock management files to be associated with all non-SORT files opened by the program will be stored.  @syntaxref{ORGANIZATION INDEXED} files will also have their data file allocated in the folder pointed to by this environment variable, if it exists..  Having this variable defined will activate record locking features on the @statementref{READ}, @statementref{REWRITE} and @statementref{WRITE}.  Even with DB_HOME, locking will not work with @syntaxref{ORGANIZATION SEQUENTIAL}, @syntaxref{ORGANIZATION LINE SEQUENTIAL} or ORGANIZATION RELATIVE files with GnuCOBOL builds created for Windows/MinGW.  @syntax{ORGANIZATION INDEXED} locks will work with Windows/MinGW + BDB and all locks will work for all file organizations with UNIX GnuCOBOL builds.
@p @item @syntaxidx{PATH}
@p The GnuCOBOL "bin" directory should be defined in the PATH.
@p @item @syntaxidx{TMPDIR}
@itemx @syntaxidx{TMP}
@itemx @syntaxidx{TEMP}
@p One of these environment variables must be set to a directory/folder appropriate to create temporary files in.  They will be checked in the order shown.  This will be used by the @statementref{SORT} and @statementref{MERGE} to create temporary work files.  You may also use this folder for any temporary files your application may require.
@end table
@p Also used during execution of programs is runtime.cfg also found in /usr/local/share/gnucobol/config for *nix and this file can also be changed to match your environment if needed.
@p When viewing, note the Default settings.
@verbatim
# GnuCOBOL runtime configuration
#
# Copyright (C) 2015-2017 Free Software Foundation, Inc.
# Written by Simon Sobisch, Ron Norman
#
# This file is part of the GnuCOBOL runtime.
#


#
## General instructions
#

# The initial runtime.cfg file is found in the  $COB_CONFIG_DIR/config
# (  COB_CONFIG_DIR  defaults to  installdir/gnucobol  ).
# The environment variable  COB_RUNTIME_CONFIG  may define a different runtime
# configuration file to read.

# If settings are included in the runtime environment file multiple times
# then the last setting value is used, no warning occurs.

# Settings via environment variables always take precedence over settings
# that are given in runtime configuration files. And the environment is
# checked after completing processing of the runtime configuration file(s)

# All values set to string variables or environment variables are checked
# for  ${envvar}  and replacement is done at the time of the setting.

# Any environment variable may be set with the directive  setenv  .
# Example:  setenv COB_LIBARAY_PATH ${LD_LIBRARY_PATH}

# Any environment variable may be unset with the directive  unsetenv
# (one var per line).
# Example:  unsetenv COB_LIBRARY_PATH

# Runtime configuration files can include other files with the directive
# include.
# Example:  include my-runtime-configuration-file

# To include another configuration file only if it is present use the directive
# includeif.
# You can also use  ${envvar}  inside this.
# Example:  includeif ${HOME}/mygc.cfg

# If you want to reset a parameter to its default value use:
#    reset parametername

# Most runtime variables have boolean values, some are switches, some have
# string values, integer values and some are size values.
# The boolean values will be evaluated as following:
#       to true:          1, Y, ON, YES, TRUE  (no matter of case)
#       to false:         0, N, OFF
# A 'size' value is an integer optionally followed by K, M, or G for kilo, mega
# or giga.

# For convenience a parameter in the runtime.cfg file may be defined by using
# either the environment variable name or the parameter name.
# In most cases the environment variable name is the parameter name (in upper
# case) with the prefix  COB_  .

#
## General environment
#

# Environment name:  COB_DISABLE_WARNINGS
#   Parameter name:  disable_warnings
#          Purpose:  turn off runtime warning messages
#             Type:  boolean
#          Default:  false
#          Example:  DISABLE_WARNINGS  TRUE

# Environment name:  COB_ENV_MANGLE
#   Parameter name:  env_mangle
#          Purpose:  names checked in the environment would get non alphanumeric
#                    change to '_'
#             Type:  boolean
#          Default:  false
#          Example:  ENV_MANGLE  TRUE

# Environment name:  COB_SET_TRACE
#   Parameter name:  set_trace
#          Purpose:  to enable to COBOL trace feature
#             Type:  boolean
#          Default:  false
#          Example:  SET_TRACE  TRUE

# Environment name:  COB_TRACE_FILE
#   Parameter name:  trace_file
#          Purpose:  to define where COBOL trace output should go
#             Type:  string
#          Default:  stderr
#          Example:  TRACE_FILE  ${HOME}/mytrace.log

# Environment name:  COB_CURRENT_DATE
#   Parameter name:  current_date
#          Purpose:  specify an alternate Date/Time to be returned to ACCEPT clauses
#                    this is used for testing purposes or to tweak a missing offset
#                    partial setting is allowed
#             Type:  numeric string in format YYYYDDMMHH24MISS or date string
#          Default:  the operating system date is used
#          Example:  COB_CURRENT_DATE "2016/03/16 16:40:52"
#                    current_date YYYYMMDDHHMMSS+01:00

#
## Call environment
#

# Environment name:  COB_LIBRARY_PATH
#   Parameter name:  library_path
#          Purpose:  paths for dynamically-loadable modules
#             Type:  string
#             Note:  the default paths .:/installpath/extras are always
#                    added to the given paths
#          Example:  LIBRARY_PATH    /opt/myapp/test:/opt/myapp/production

# Environment name:  COB_PRE_LOAD
#   Parameter name:  pre_load
#          Purpose:  modules that are loaded during startup, can be used
#                    to CALL COBOL programs or C functions that are part
#                    of a module library
#             Type:  string
#             Note:  the modules listed should NOT include extensions, the
#                    runtime will use the right ones on the various platforms,
#                    COB_LIBRARY_PATH is used to locate the modules
#          Example:  PRE_LOAD      COBOL_function_library:external_c_library

# Environment name:  COB_LOAD_CASE
#   Parameter name:  load_case
#          Purpose:  resolve ALL called program names to UPPER or LOWER case
#             Type:  Only use  UPPER  or  LOWER
#          Default:  if not set program names in CALL are case sensitive
#          Example:  LOAD_CASE  UPPER

# Environment name:  COB_PHYSICAL_CANCEL
#   Parameter name:  physical_cancel
#          Purpose:  physically unload a dynamically-loadable module on CANCEL,
#                    this frees some RAM and allows the change of modules during
#                    run-time but needs more time to resolve CALLs (both to
#                    active and not-active programs)
#            Alias:  default_cancel_mode, LOGICAL_CANCELS (0 = yes)
#             Type:  boolean (evaluated for true only)
#          Default:  false
#          Example:  PHYSICAL_CANCEL  TRUE

#
## File I/O
#

# Environment name:  COB_VARSEQ_FORMAT
#   Parameter name:  varseq_format
#          Purpose:  declare format used for variable length sequential files
#                    - different types and lengths precede each record
#                    - 'length' is the data length & does not include the prefix
#             Type:  0   means 2 byte record length (big-endian) + 2 NULs
#                    1   means 4 byte record length (big-endian)
#                    2   means 4 byte record length (local machine int)
#                    3   means 2 byte record length (big-endian)
#          Default:  0
#          Example:  VARSEQ_FORMAT 1

# Environment name:  COB_FILE_PATH
#   Parameter name:  file_path
#          Purpose:  define default location where data files are stored
#             Type:  file path directory
#          Default:  .  (current directory)
#          Example:  FILE_PATH ${HOME}/mydata

# Environment name:  COB_LS_FIXED
#   Parameter name:  ls_fixed
#          Purpose:  Defines if LINE SEQUENTIAL files should be fixed length
#                    (or variable, by removing trailing spaces)
#            Alias:  STRIP_TRAILING_SPACES  (0 = yes)
#             Type:  boolean
#          Default:  false
#          Example:  LS_FIXED TRUE

# Environment name:  COB_LS_NULLS
#   Parameter name:  ls_nulls
#          Purpose:  Defines for LINE SEQUENTIAL files what to do with data
#                    which is not DISPLAY type.  This could happen if a LINE
#                    SEQUENTIAL record has COMP data fields in it.
#             Type:  boolean
#          Default:  false
#             Note:  The TRUE setting will handle files that contain COMP data
#                    in a similar manner to the method used by Micro Focus COBOL
#          Example:  LS_NULL = TRUE

# Environment name:  COB_SYNC
#   Parameter name:  sync
#          Purpose:  Should the file be synced to disk after each write/update
#             Type:  boolean
#          Default:  false
#          Example:  SYNC: TRUE

# Environment name:  COB_SORT_MEMORY
#   Parameter name:  sort_memory
#          Purpose:  Defines how much RAM to assign for sorting data
#                    if this size is exceeded the  SORT  will be done
#                    on disk instead of memory
#             Type:  size  but must be more than 1M
#          Default:  128M
#          Example:  SORT_MEMORY 64M

# Environment name:  COB_SORT_CHUNK
#   Parameter name:  sort_chunk
#          Purpose:  Defines how much RAM to assign for sorting data in chunks
#             Type:  size  but must be within 128K and 16M
#          Default:  256K
#          Example:  SORT_CHUNK 1M

#
## Screen I/O
#

# Environment name:  COB_BELL
#   Parameter name:  bell
#          Purpose:  Defines how a request for the screen to beep is handled
#             Type:  FLASH, SPEAKER, FALSE, BEEP
#          Default:  BEEP
#          Example:  BELL SPEAKER

# Environment name:  COB_REDIRECT_DISPLAY
#   Parameter name:  redirect_display
#          Purpose:  Defines if DISPLAY output should be sent to 'stderr'
#             Type:  boolean
#          Default:  false
#          Example:  redirect_display Yes

# Environment name:  COB_SCREEN_ESC
#   Parameter name:  screen_esc
#          Purpose:  Enable handling of ESC key during ACCEPT
#             Type:  boolean
#          Default:  false
#             Note:  is only evaluated if COB_SCREEN_EXCEPTIONS is active
#          Example:  screen_esc Yes

# Environment name:  COB_SCREEN_EXCEPTIONS
#   Parameter name:  screen_exceptions
#          Purpose:  enable exceptions for function keys during ACCEPT
#             Type:  boolean
#          Default:  false
#          Example:  screen_exceptions Yes

# Environment name:  COB_TIMEOUT_SCALE
#   Parameter name:  timeout_scale
#          Purpose:  specify translation in milliseconds for ACCEPT clauses
#                    BEFORE TIME value / AFTER TIMEOUT
#             Type:  integer
#                    0 means 1000 (Micro Focus COBOL compatible), 1 means 100
#                    (ACUCOBOL compatible), 2 means 10, 3 means 1
#          Default:  0
#          Example:  timeout_scale 3

# Environment name:  COB_INSERT_MODE
#   Parameter name:  insert_mode
#          Purpose:  specify default insert mode for ACCEPT; 0=off, 1=on
#             Type:  boolean
#          Default:  false
#             Note:  also sets the cursor type (if available)
#          Example:  insert_mode Y

# Environment name:  COB_LEGACY
#   Parameter name:  legacy
#          Purpose:  keep behaviour of former runtime versions, currently only
#                    for setting screen attributes for non input fields
#             Type:  boolean
#          Default:  not set
#          Example:  legacy true

# Environment name:  COB_EXIT_WAIT
#   Parameter name:  exit_wait
#          Purpose:  to wait on main program exit if an extended screenio
#                    DISPLAY was issued without an ACCEPT following
#             Type:  boolean
#          Default:  true
#          Example:  COB_EXIT_WAIT off

# Environment name:  COB_EXIT_MSG
#   Parameter name:  exit_msg
#          Purpose:  string to display if COB_EXIT_WAIT is processed, set to ''
#                    if no actual display but an ACCEPT should be done
#             Type:  string
#          Default:  'end of program, please press a key to exit' (localized)
#          Example:  COB_EXIT_MSG ''

# Note: If you want to slightly speed up a program's startup time, remove all
#       of the comments from the actual real file that is processed


@end verbatim
@comment *********************************************************************
@comment ** 8.2.4 Program Arguments                                         **
@comment *********************************************************************
@newsubsection{8.2.4,Program Arguments}@p Regardless of the manner in which a main program is executed (i.e. directly or via @syntax{cobcrun}), any arguments specified to the program may be retrieved via any of the following:
@itemize @bullet
@p @item @syntaxref{ACCEPT FROM COMMAND-LINE}
@p @item @syntaxref{PROCEDURE DIVISION CHAINING}
@end itemize
@comment *********************************************************************
@comment ** 8.3 Built-In System Subroutines                                 **
@comment *********************************************************************
@newsection{8.3,Built-In System Subroutines}@p There are a number of built-in system subroutines included with GnuCOBOL.
@p Generally, these routines are intended to match those available in Micro Focus COBOL, ACUCOBOL and directly for GnuCOBOL.
@p It is recommended to change the CBL_OC routines to CBL_GC for forward compatability as at some point they will be removed as they are a hangover from Open Cobol.
@verbatim

Prefix explanation:
        C$ --> ACU,
        CBL_ --> MF,
        CBL_GC_ (For backwards compatibility some routines are also available as
        CBL_OC_, as well): but these wonderful extensions are *only* available
        with GnuCOBOL.

@end verbatim

@p These routines, all executed via their UPPER-CASE NAMES via the @statementref{CALL}, are capable of performing the following Functions:
@itemize @bullet
@p @item Changing the current directory
@p @item Copying files
@p @item Creating a directory
@p @item Creating, Opening, Closing, Reading and Writing byte-stream files
@p @item Deleting directories (folders)
@p @item Deleting files
@p @item Determining how many arguments were passed to a subroutine
@p @item Getting file information (size and last-modification date/time)
@p @item Getting the length (in bytes) of an argument passed to a subroutine
@p @item Justifying a field left-, right- or center-aligned
@p @item Moving files (a destructive "copy")
@p @item Putting the program 'to sleep', specifying the sleep time in seconds
@p @item Putting the program 'to sleep', specifying the sleep time in nanoseconds; CAVEAT: although you'll express the time in nanoseconds, Windows systems will only be able to sleep at a millisecond granularity
@p @item Retrieving information about the currently-executing program
@p @item Submitting a command to the shell environment appropriate for the version of GnuCOBOL you are using for execution
@end itemize
@* Early versions of Micro Focus COBOL allowed programmers to access various runtime library routines by using a single two-digit hexadecimal number as the entry-point name.  These were known as call-by-number routines.  Over time, Micro Focus COBOL evolved, replacing most of the call-by-number routines with ones accessible using a more conventional call-by-name technique.
@p Most of the call-by-number routines have evolved into even more powerful call-by-name routines, many of which are supported by GnuCOBOL.
@p Some of the original call-by-number routines never evolved call-by-name equivalents; GnuCOBOL supports some of these routines.
@p The following sections describe the various built-in subroutines.  ALL SUBROUTINE ARGUMENTS ARE MANDATORY EXCEPT WHERE EXPLICITLY NOTED TO THE CONTRARY.  Any subroutine returning a value to the @registerref{RETURN-CODE} could utilize the @syntax{RETURNING} clause on the @statement{CALL} to return the result back to the full-word binary data item of your choice.
@menu
* 8.3.1:  C$CALLEDBY.
* 8.3.2:  C$CHDIR.
* 8.3.3:  C$COPY.
* 8.3.4:  C$DELETE.
* 8.3.5:  C$FILEINFO.
* 8.3.6:  C$GETPID.
* 8.3.7:  C$JUSTIFY.
* 8.3.8:  C$MAKEDIR.
* 8.3.9:  C$NARG.
* 8.3.10: C$PARAMSIZE.
* 8.3.11: C$PRINTABLE.
* 8.3.12: C$SLEEP.
* 8.3.13: C$TOLOWER.
* 8.3.14: C$TOUPPER.
* 8.3.15: CBL_AND.
* 8.3.16: CBL_CHANGE_DIR.
* 8.3.17: CBL_CHECK_FILE_EXIST.
* 8.3.18: CBL_CLOSE_FILE.
* 8.3.19: CBL_COPY_FILE.
* 8.3.20: CBL_CREATE_DIR.
* 8.3.21: CBL_CREATE_FILE.
* 8.3.22: CBL_DELETE_DIR.
* 8.3.23: CBL_DELETE_FILE.
* 8.3.24: CBL_EQ.
* 8.3.25: CBL_ERROR_PROC.
* 8.3.26: CBL_EXIT_PROC.
* 8.3.27: CBL_FLUSH_FILE.
* 8.3.28: CBL_GC_FORK.
* 8.3.29: CBL_GC_GETOPT.
* 8.3.30: CBL_GC_HOSTED.
* 8.3.31: CBL_GC_NANOSLEEP.
* 8.3.32: CBL_GC_PRINTABLE.
* 8.3.33: CBL_GC_WAITPID.
* 8.3.34: CBL_GET_CSR_POS.
* 8.3.35: CBL_GET_CURRENT_DIR.
* 8.3.36: CBL_GET_SCR_SIZE.
* 8.3.37: CBL_IMP.
* 8.3.38: CBL_NIMP.
* 8.3.39: CBL_NOR.
* 8.3.40: CBL_NOT.
* 8.3.42: CBL_OPEN_FILE.
* 8.3.43: CBL_OR.
* 8.3.44: CBL_READ_FILE.
* 8.3.45: CBL_RENAME_FILE.
* 8.3.46: CBL_TOLOWER.
* 8.3.47: CBL_TOUPPER.
* 8.3.48: CBL_WRITE_FILE.
* 8.3.49: CBL_XOR.
* 8.3.50: SYSTEM.
* 8.3.51: X"91".
* 8.3.52: X"E4".
* 8.3.53: X"E5".
* 8.3.54: X"F4".
* 8.3.55: X"F5".
@end menu
@comment *********************************************************************
@comment ** 8.3.1 C$CALLEDBY                                                **
@comment *********************************************************************
@newsubsection{8.3.1,C$CALLEDBY}
@diagram{C$CALLEDBY Built-In Subroutine,SS-C$CALLEDBY,SS-C$CALLEDBY,None}@p This routine returns the name of the program that called the currently-executing program.  The program name will be returned, left-justified and space filled, in the specified @term{prog-name-area} argument, which should be a @syntax{PIC X} elementary item or a group item.  If @term{prog-name-area} is too small to receive the entire program name, the program name value will be truncated (on the right) to fit.
@p The @registerref{RETURN-CODE} will be set to one of the following values:
@multitable @columnfractions 0.05 0.95
@item
@item -1 @tab An error occurred.  The @term{prog-name-area} contents will be unchanged.
@item
@item 0 @tab The program calling @syntax{C$CALLEDBY} was not called by any other program (in other words, it is a main program).  The @term{prog-name-area} contents will be set entirely to spaces.
@item
@item 1 @tab The program calling @syntax{C$CALLEDBY} was indeed called by another program, and that program's name has been saved in @term{prog-name-area}.
@end multitable
@comment *********************************************************************
@comment ** 8.3.2 C$CHDIR                                                   **
@comment *********************************************************************
@newsubsection{8.3.2,C$CHDIR}
@diagram{C$CHDIR Built-In Subroutine,SS-C$CHDIR,SS-C$CHDIR,None}@p This routine makes @term{directory-path} (an alphanumeric literal or identifier) the current directory.
@p The return code of the operation is returned both in the @term{result} argument (any non-edited numeric identifier) as well as in the @registerref{RETURN-CODE}.   The return code of the operation will be either 0=Success or 128=failure.
@p The directory change remains in effect until the program terminates (in which the original current directory at the time the program was started will be automatically restored) or until another @syntax{C$CHDIR} or a @subpgmref{CBL_CHANGE_DIR} is executed.
@comment *********************************************************************
@comment ** 8.3.3 C$COPY                                                    **
@comment *********************************************************************
@newsubsection{8.3.3,C$COPY}
@diagram{C$COPY Built-In Subroutine,SS-C$COPY,SS-C$COPY,None}@p Use this subroutine to copy file @term{src-file-path} to @term{dest-file-path} as if it were done via the @syntax{CP} (Unix/OSX) or @syntax{COPY} (Windows) command.
@p Both file path arguments may be alphanumeric literals or identifiers.
@p The third argument is required, but is unused.
@p If the attempt to copy the file fails (for example, it or the destination directory doesn't exist), the @registerref{RETURN-CODE} will be set to 128; on successful completion it will be set to 0.
@comment *********************************************************************
@comment ** 8.3.4 C$DELETE                                                  **
@comment *********************************************************************
@newsubsection{8.3.4,C$DELETE}
@diagram{C$DELETE Built-In Subroutine,SS-C$DELETE,SS-C$DELETE,None}@p This routine deletes the file specified by the @term{file-path} argument (an alphanumeric literal or identifier) just as if that were done using the @syntax{RM} (Unix/OSX) or @syntax{ERASE} (Windows) command.
@p The second argument is required, but is unused.
@p If the attempt to delete the file fails (for example, it doesn't exist), the @registerref{RETURN-CODE} will be set to 128; on successful completion it will be set to 0.
@comment *********************************************************************
@comment ** 8.3.5 C$FILEINFO                                                **
@comment *********************************************************************
@newsubsection{8.3.5,C$FILEINFO}
@diagram{C$FILEINFO Built-In Subroutine,SS-C$FILEINFO,SS-C$FILEINFO,None}@p With this routine you may retrieve the size of the file specified as the @term{file-path} argument (an alphanumeric literal or identifier) and the date/time that file was last modified.  File size information may not be available in the particular GnuCOBOL build / Operating System combination you are using and may therefore always be returned as zero.  The information is returned to the @term{file-info} argument, which is defined as the following 16-byte area:
@p @example
01  File-Info.
    05 File-Size-In-Bytes  PIC 9(18) COMP.
    05 Mod-YYYYMMDD        PIC 9(8)  COMP. *> Modification Date
    05 Mod-HHMMSS00        PIC 9(8)  COMP. *> Modification Time
@end example
@* The last two decimal digits in the modification time will always be 00.
@p If the subroutine is successful, a value of 0 will be returned in the @registerref{RETURN-CODE}.  Failure to retrieve the needed statistics on the file will cause a @register{RETURN-CODE} value of 35 to be passed back.  Supplying less than two arguments will generate a 128 @register{RETURN-CODE} value.
@comment *********************************************************************
@comment ** 8.3.6 C$GETPID}                                                 **
@comment *********************************************************************
@newsubsection{8.3.6,C$GETPID}
@diagram{C$GETPID Built-In Subroutine,SS-C$GETPID,SS-C$GETPID,None}@p Use this subroutine to return the PID (process ID) of the executing GnuCOBOL program.  The PID value is returned into the @registerref{RETURN-CODE}.
@p There are no arguments to this routine.
@comment *********************************************************************
@comment ** 8.3.7 C$JUSTIFY                                                 **
@comment *********************************************************************
@newsubsection{8.3.7,C$JUSTIFY}
@diagram{C$JUSTIFY Built-In Subroutine,SS-C$JUSTIFY,SS-C$JUSTIFY,None}@p Use C$JUSTIFY to left, right or center-justify an alphabetic, alphanumeric or numeric edited data-item.  The optional justification-type argument indicates the type of the justification to be performed.  The value of that argument will be interpreted as follows:
@itemize @bullet
@p @item If it begins with a capital "C", the value will be centred
@p @item If it begins with a capital "R", the value will be right-justified, space-filled to the left
@p @item If it begins with a capital "L", the value will be left-justified, space-filled to the right
@p @item If it begins with anything else, or is absent, it will be treated as if it is present and begins with a capital "R"
@end itemize
@comment *********************************************************************
@comment ** 8.3.8 C$MAKEDIR                                                 **
@comment *********************************************************************
@newsubsection{8.3.8,C$MAKEDIR}
@diagram{C$MAKEDIR Built-In Subroutine,SS-C$MAKEDIR,SS-C$MAKEDIR,None}@p With this routine you may create a new directory --- the name of which is supplied as the @term{dir-path} argument (an alphanumeric literal or identifier).
@p Only the lowest-level directory (last) in the specified path can be created --- all others must already exist.  This subroutine will NOT behave as a @syntax{mkdir -p} (Unix) or @syntax{mkdir /p} (Windows).
@p The @registerref{RETURN-CODE} will be set to the return code of the operation; the value will be either 0=Success or 128=failure.
@comment *********************************************************************
@comment ** 8.3.9 C$NARG                                                    **
@comment *********************************************************************
@newsubsection{8.3.9,C$NARG}
@diagram{C$NARG Built-In Subroutine,SS-C$NARG,SS-C$NARG,None}@p This subroutine returns the number of arguments passed to the program that calls it back to in the numeric field @term{arg-count-result}.  When called from within a user-defined function, a value of one (1) is returned if any arguments were passed to the function or a zero (0) otherwise.
@p When called from a main program, the returned value will always be 0.
@comment *********************************************************************
@comment ** 8.3.10 C$PARAMSIZE                                              **
@comment *********************************************************************
@newsubsection{8.3.10,C$PARAMSIZE}
@diagram{C$PARAMSIZE Built-In Subroutine,SS-C$PARAMSIZE,SS-C$PARAMSIZE,None}@p This subroutine returns the size (in bytes) of the subroutine argument supplied using the @term{argument-number} parameter (a numeric literal or data item).
@p The size is returned in the @registerref{RETURN-CODE}.
@p If the specified argument does not exist, or an invalid argument number is specified, a value of 0 is returned.
@comment *********************************************************************
@comment ** 8.3.11 C$PRINTABLE                                              **
@comment *********************************************************************
@newsubsection{8.3.11,C$PRINTABLE}
@diagram{C$PRINTABLE Built-In Subroutine,SS-C$PRINTABLE,SS-C$PRINTABLE,None}@p The @syntax{C$PRINTABLE} subroutine converts the contents of the data-item specified as the first argument to printable characters.  Those characters that are deemed printable (as defined by the character set used by @term{data-item}) will remain unchanged, while those that are NOT printable will be converted to the character specified as the second argument.
@p If no @term{char} argument is provided, a period (".") will be used.
@p NOTE that CBL_GC_PRINTABLE replaces this although it is currently still supported for legacy reasons.
@comment *********************************************************************
@comment ** 8.3.12 C$SLEEP                                                  **
@comment *********************************************************************
@newsubsection{8.3.12,C$SLEEP}
@diagram{C$SLEEP Built-In Subroutine,SS-C$SLEEP,SS-C$SLEEP,None}@p @syntax{C$SLEEP} puts the program to sleep for the specified number of seconds.  The @term{seconds-to-sleep} argument may be a numeric literal or data item.
@p Sleep times less than 1 will be interpreted as 0, which immediately returns control to the calling program without any sleep delay.
@comment *********************************************************************
@comment ** 8.3.13 C$TOLOWER                                                **
@comment *********************************************************************
@newsubsection{8.3.13,C$TOLOWER}
@diagram{C$TOLOWER Built-In Subroutine,SS-C$TOLOWER,SS-C$TOLOWER,None}@p This routine will converts the @term{convert-length} (a numeric literal or data item) leading characters of @term{data-item} (an alphanumeric identifier) to lower-case.
@p The @term{convert-length} argument must be specified @syntaxrefalt{BY VALUE,CALL}.
Any characters in @term{data-item} after the @term{convert-length} point will remain unchanged.
@p If @term{convert-length} is negative or zero, no conversion will be performed.
@comment *********************************************************************
@comment ** 8.3.14 C$TOUPPER                                                **
@comment *********************************************************************
@newsubsection{8.3.14,C$TOUPPER}
@diagram{C$TOUPPER Built-In Subroutine,SS-C$TOUPPER,SS-C$TOUPPER,None}@p This routine will converts the @term{convert-length} (a numeric literal or data item) leading characters of @term{data-item} (an alphanumeric identifier) to upper-case.
@p The @term{convert-length} argument must be specified @syntaxrefalt{BY VALUE,CALL}.
Any characters in @term{data-item} after the @term{convert-length} point will remain unchanged.
@p If @term{convert-length} is negative or zero, no conversion will be performed.
@comment *********************************************************************
@comment ** 8.3.15 CBL_AND                                                  **
@comment *********************************************************************
@newsubsection{8.3.15,CBL_AND}
@diagram{CBL_AND Built-In Subroutine,SS-CBL_AND,SS-CBL_AND,None}
@multitable @columnfractions 0.3 0.7
@item @t{@ Old @ @ @ Old @ @ @ New} @* @t{Arg 1@ @ Arg 2@ @ Arg 2} @* @t{@ Bit@ @ @ @ Bit@ @ @ @ Bit} @* @t{=====@ @ =====@ @ =====} @* @t{@ @ 0@ @ @ @ @ @ 0@ @ @ @ @ @ 0} @* @t{@ @ 0@ @ @ @ @ @ 1@ @ @ @ @ @ 0} @* @t{@ @ 1@ @ @ @ @ @ 0@ @ @ @ @ @ 0} @* @t{@ @ 1@ @ @ @ @ @ 1@ @ @ @ @ @ 1}  @tab This subroutine performs a bit-by-bit logical AND operation between the left-most 8*@term{byte-length} corresponding bits of @term{item-1} and @term{item-2}, storing the resulting bit string into @term{item-2}.  The truth table shown to the left documents the AND process.
 @* @* The @term{item-1} argument may be an alphanumeric literal or a data item and @term{item-2} must be a data item.  The length of both @term{item-1} and @term{item-2} must be at least 8*@term{byte-length}.
@end multitable
@p The @term{byte-length} argument may be a numeric literal or data item, and must be specified using @syntaxrefalt{BY VALUE,CALL}.
@p Any bits in @term{item-2} after the 8*@term{byte-length} point will be unaffected.
@p A result of zero will be passed back in the @registerref{RETURN-CODE}.
@comment *********************************************************************
@comment ** 8.3.16 CBL_CHANGE_DIR                                           **
@comment *********************************************************************
@newsubsection{8.3.16,CBL_CHANGE_DIR}
@diagram{CBL_CHANGE_DIR Built-In Subroutine,SS-CBL_CHANGE_DIR,SS-CBL_CHANGE_DIR,None}@p This routine makes @term{directory-path} (an alphanumeric literal or identifier) the current directory.
@p The return code of the operation, which will be either 0=Success or 128=failure, is returned in the @registerref{RETURN-CODE}. @p The directory change remains in effect until the program terminates (in which the original current directory at the time the program was started will be automatically restored) or until another @syntax{CBL_CHANGE_DIR} or a @subpgmref{C$CHDIR} is executed.
@comment *********************************************************************
@comment ** 8.3.17 CBL_CHECK_FILE_EXIST                                     **
@comment *********************************************************************
@newsubsection{8.3.17,CBL_CHECK_FILE_EXIST}
@diagram{CBL_CHECK_FILE_EXIST Built-In Subroutine,SS-CBL_CHK_FILE_EX,SS-CBL_CHK_FILE_EX,None}@p With this routine you may retrieve the size of the file specified as the @term{file-path} argument (an alphanumeric literal or identifier) and the date/time that file was last modified.  File size information may not be available in the particular GnuCOBOL build / Operating System combination you are using and may therefore always be returned as zero.
@p The information is returned to the @term{file-info} argument, which is defined as the following 16-byte area:
@p @example
01  file-info.
    05 File-Size-In-Bytes  PIC 9(18)  COMP.
    05 Mod-DD              PIC 9(2)   COMP.  *> Modification Time
    05 Mod-MO              PIC 9(2)   COMP.
    05 Mod-YYYY            PIC 9(4)   COMP.  *> Modification Date
    05 Mod-HH              PIC 9(2)   COMP.
    05 Mod-MM              PIC 9(2)   COMP.
    05 Mod-SS              PIC 9(2)   COMP.
    05 FILLER              PIC 9(2)   COMP.  *> Always 00
@end example
@* If the subroutine is successful, a value of 0 will be returned in the @registerref{RETURN-CODE}.  Failure to retrieve the needed statistics on the file will cause a @register{RETURN-CODE} value of 35 to be passed back.  Supplying less than two arguments will generate a 128 @register{RETURN-CODE} value.
@comment *********************************************************************
@comment ** 8.3.18 CBL_CLOSE_FILE                                           **
@comment *********************************************************************
@newsubsection{8.3.18,CBL_CLOSE_FILE}
@diagram{CBL_CLOSE_FILE Built-In Subroutine,SS-CBL_CLOSE_FILE,SS-CBL_CLOSE_FILE,None}@p The @syntax{CBL_CLOSE_FILE} subroutine closes a byte stream file previously opened by either the @subpgmref{CBL_OPEN_FILE} or @subpgmref{CBL_CREATE_FILE} subroutines.
@p If the file defined by the @term{file-handle} argument (a @syntax{PIC X(4) USAGE COMP-X} data item) was opened for output, an implicit @subpgmref{CBL_FLUSH_FILE} will be performed before the file is closed.
@p If the subroutine is successful, a value of 0 will be returned in the @registerref{RETURN-CODE}.  Failure will cause a @register{RETURN-CODE} value of -1 to be passed back.
@comment *********************************************************************
@comment ** 8.3.19 CBL_COPY_FILE                                            **
@comment *********************************************************************
@newsubsection{8.3.19,CBL_COPY_FILE}
@diagram{CBL_COPY_FILE Built-In Subroutine,SS-CBL_COPY_FILE,SS-CBL_COPY_FILE,None}@p Use this subroutine to copy file @term{src-file-path} to @term{dest-file-path} as if it were done via the @syntax{CP} (Unix/OSX) or @syntax{COPY} (Windows) command.
@p Both arguments may be alphanumeric literals or identifiers.
@p If the attempt to copy the file fails (for example, it or the destination directory doesn't exist), the @registerref{RETURN-CODE} will be set to 128; on successful completion it will be set to 0.
@comment *********************************************************************
@comment ** 8.3.20 CBL_CREATE_DIR                                           **
@comment *********************************************************************
@newsubsection{8.3.20,CBL_CREATE_DIR}
@diagram{CBL_CREATE_DIR Built-In Subroutine,SS-CBL_CREATE_DIR,SS-CBL_CREATE_DIR,None}@p With this routine you may create a new directory --- the name of which is supplied as the @term{dir-path} argument (an alphanumeric literal or identifier).
@p Only the lowest-level directory (last) in the specified path can be created --- all others must already exist.  This subroutine will NOT behave as a @syntax{mkdir -p} (Unix) or @syntax{mkdir /p} (Windows).
@p The @registerref{RETURN-CODE} will be set to the return code of the operation; the value will be either 0=Success or 128=failure.
@comment *********************************************************************
@comment ** 8.3.21 CBL_CREATE_FILE                                          **
@comment *********************************************************************
@newsubsection{8.3.21,CBL_CREATE_FILE}
@diagram{CBL_CREATE_FILE Built-In Subroutine,SS-CBL_CREATE_FILE,SS-CBL_CREATE_FILE,None}@p The @syntax{CBL_CREATE_FILE} subroutine creates the new file specified using the file-path argument and opens it for output as a byte-stream file usable by @subpgmref{CBL_WRITE_FILE}.
@p Arguments 2, 3 and 4 should be coded as the constant values shown.  @syntax{CBL_CREATE_FILE} is actually a special-case of the @subpgmref{CBL_OPEN_FILE} routine --- see that routine for a description of the meanings of arguments 2, 3 and 4.
@p A @term{file-handle} (@syntax{PIC X(4) USAGE COMP-X)} will be returned, for use on any subsequent @subpgmref{CBL_WRITE_FILE} or @subpgmref{CBL_CLOSE_FILE} calls.
@p The success or failure of the subroutine will be reported back in the @registerref{RETURN-CODE}, with a value of -1 indicating an invalid argument and a value of 0 indicating success.
@comment *********************************************************************
@comment ** 8.3.22 CBL_DELETE_DIR                                           **
@comment *********************************************************************
@newsubsection{8.3.22,CBL_DELETE_DIR}
@diagram{CBL_DELETE_DIR Built-In Subroutine,SS-CBL_DELETE_DIR,SS-CBL_DELETE_DIR,None}@p This subroutine deletes an empty directory.
@p The only argument --- @term{dir-path} (an alphanumeric literal or identifier) --- is the name of the directory to be deleted.
@p Only the lowest-level directory (last) in the specified path will be deleted, and that directory must be empty to be deleted.
@p The @registerref{RETURN-CODE} will be set to the return code of the operation; the value will be either 0=Success or 128=failure.
@comment *********************************************************************
@comment ** 8.3.23 CBL_DELETE_FILE                                          **
@comment *********************************************************************
@newsubsection{8.3.23,CBL_DELETE_FILE}
@diagram{CBL_DELETE_FILE Built-In Subroutine,SS-CBL_DELETE_FILE,SS-CBL_DELETE_FILE,None}@p This routine deletes the file specified by the @term{file-path} argument (an alphanumeric literal or identifier) just as if that were done using the @syntax{RM} (Unix/OSX) or @syntax{ERASE} (Windows) command.
@p If the attempt to delete the file fails (for example, it doesn't exist), the @registerref{RETURN-CODE} will be set to 128; on successful completion it will be set to 0.
@comment *********************************************************************
@comment ** 8.3.24 CBL_EQ                                                   **
@comment *********************************************************************
@newsubsection{8.3.24,CBL_EQ}
@diagram{CBL_EQ Built-In Subroutine,SS-CBL_EQ,SS-CBL_EQ,None}
@multitable @columnfractions 0.3 0.7
@item @t{@ Old @ @ @ Old @ @ @ New} @* @t{Arg 1@ @ Arg 2@ @ Arg 2} @* @t{@ Bit@ @ @ @ Bit@ @ @ @ Bit} @* @t{=====@ @ =====@ @ =====} @* @t{@ @ 0@ @ @ @ @ @ 0@ @ @ @ @ @ 1} @* @t{@ @ 0@ @ @ @ @ @ 1@ @ @ @ @ @ 0} @* @t{@ @ 1@ @ @ @ @ @ 0@ @ @ @ @ @ 0} @* @t{@ @ 1@ @ @ @ @ @ 1@ @ @ @ @ @ 1}  @tab This subroutine performs a bit-by-bit comparison between the left-most 8*@term{byte-length} corresponding bits of @term{item-1} and @term{item-2}, storing the resulting bit string into @term{item-2}.  The truth table shown to the left documents the EQ process.
 @* @* The @term{item-1} argument may be an alphanumeric literal or a data item and @term{item-2} must be a data item.  The length of both @term{item-1} and @term{item-2} must be at least 8*@term{byte-length}.
@end multitable
@* The @term{byte-length} argument may be a numeric literal or data item, and must be specified using @syntaxrefalt{BY VALUE,CALL}.
@p Any bits in @term{item-2} after the 8*@term{byte-length} point will be unaffected.
@p A result of zero will be passed back in the @registerref{RETURN-CODE}.
@comment *********************************************************************
@comment ** 8.3.25 CBL_ERROR_PROC                                           **
@comment *********************************************************************
@newsubsection{8.3.25,CBL_ERROR_PROC}
@diagram{CBL_ERROR_PROC Built-In Subroutine,SS-CBL_ERROR_PROC,SS-CBL_ERROR_PROC,None}@p This routine registers a general error-handling routine.
@p The @term{function} argument must be a numeric literal or a 32-bit binary data item (@syntax{USAGE BINARY-LONG}, for example) with a value of 0 or 1.  A value of 0 means that you will be registering ("installing") an error procedure while a value of 1 indicates you're de-registering ("uninstalling") a previously-installed error procedure.
@p The @term{program-pointer} must be a data item with a @syntaxref{USAGE} of @syntax{PROGRAM-POINTER} containing the address of your error procedure.  This item should be given a value using the @statementref{SET Program-Pointer}.  If the error procedure is written in GnuCOBOL, it must be a subroutine, not a user-defined function.
@p A success (0) or failure (non-0) result will be passed back in the @registerref{RETURN-CODE}.
@p A custom error procedure will trigger when a runtime error condition is encountered.  An error procedure may be registered by a main program or a subprogram, but regardless of from where it was registered, it applies to the overall program compilation group  and will trigger when a runtime error occurs anywhere in the executable program.  If the error procedure was defined by a subprogram, that program must be loaded at the time the error procedure is executed.
@p An error procedure may be used to take whatever actions might be warranted to display additional information or to gracefully close down work in progress, but it cannot @i{prevent} the termination of program execution; should the error procedure not issue its own @syntax{STOP RUN}, control will return back to the standard error routine when the error procedure exits.
@p The code within the handler will be executed and --- once the handler issues a @syntax{return}, if it was written in C, or an @statementrefalt{EXIT PROGRAM,EXIT} or @statement{GOBACK}, if it was written in GnuCOBOL, the system-standard error handling routine will be executed.
@p Only one user-defined error procedure may be in effect at any time.
@p The following is a sample GnuCOBOL program that registers an error procedure.  The output of that program is shown as well.  As as you can see, the error handler's messages appear followed by the standard GnuCOBOL message.
@p @example
1.     IDENTIFICATION DIVISION.
2.     PROGRAM-ID. DemoERRPROC.
3.     ENVIRONMENT DIVISION.
4.     DATA DIVISION.
5.     WORKING-STORAGE SECTION.
6.     01  Err-Proc-Address            USAGE PROGRAM-POINTER.
7.     PROCEDURE DIVISION.
8.     S1.
9.         DISPLAY 'Program is starting'
10.        SET Err-Proc-Address TO ENTRY 'ErrProc'
11.        CALL 'CBL_ERROR_PROC' USING 0, Err-Proc-Address
12.        CALL 'Tilt' *> THIS DOESN'T EXIST!!!!
13.        DISPLAY 'Program is stopping'
14.        STOP RUN
15.        .
16.    END PROGRAM DemoERRPROC.
17.
18.    IDENTIFICATION DIVISION.
19.    PROGRAM-ID. ErrProc.
20.    PROCEDURE DIVISION.
21.    000-Main.
22.        DISPLAY 'Error: ' FUNCTION EXCEPTION-LOCATION
23.        DISPLAY '       ' FUNCTION EXCEPTION-STATEMENT
24.        DISPLAY '       ' FUNCTION EXCEPTION-FILE
25.        DISPLAY '       ' FUNCTION EXCEPTION-STATUS
26.        DISPLAY '*** Returning to Standard Error Routine ***'
27.        EXIT PROGRAM
28.        .
29.    END PROGRAM ErrProc.
@end example
@* When executed, this sample program generates the following console output.
@p @example
E:\Programs\Demos>demoerrproc
Program is starting
Error: DemoERRPROC; S1; 12
       CALL
       00
       EC-PROGRAM-NOT-FOUND
*** Returning to Standard Error Routine ***
DEMOERRPROC.cbl: 27: libcob: Cannot find module 'Tilt'

E:\Programs\Demos>

@end example
@comment *********************************************************************
@comment ** 8.3.26 CBL_EXIT_PROC                                            **
@comment *********************************************************************
@newsubsection{8.3.26,CBL_EXIT_PROC}
@diagram{CBL_EXIT_PROC Built-In Subroutine,SS-CBL_EXIT_PROC,SS-CBL_EXIT_PROC,None}@p This routine registers a general exit-handling routine.
@p The @term{function} argument must be a numeric literal or a 32-bit binary data item (@syntax{USAGE BINARY-LONG}, for example) with a value of 0 or 1.  A value of 0 means that you will be registering ("installing") an exit procedure while a value of 1 indicates you're deregistering ("uninstalling") a previously-installed exit procedure.
@p The @term{program-pointer} must be a data item with a @syntaxref{USAGE} of @syntax{PROGRAM-POINTER} containing the address of your exit procedure.
@p A success (0) or failure (non-0) result will be passed back in the @registerref{RETURN-CODE}.
@p An exit procedure, once registered, will trigger whenever a @statementrefalt{STOP RUN,STOP} or a @statementref{GOBACK} is executed anywhere in the program.  The exit procedure may execute whatever code is desired to undertake an orderly shut down of the program.  Once the exit procedure terminates by executing an @statementrefalt{EXIT PROGRAM,EXIT} or a @statement{GOBACK}, the system-standard program termination routine will be executed.
@p Only one user-defined exit procedure may be in effect at any time.
@p The following is a sample GnuCOBOL program that registers an exit procedure.  The output of that program is shown as well.
@p @example
IDENTIFICATION DIVISION.
PROGRAM-ID. demoexitproc.
DATA DIVISION.
WORKING-STORAGE SECTION.
01  Exit-Proc-Address           USAGE PROGRAM-POINTER.
PROCEDURE DIVISION.
000-Register-Exit-Proc.
    SET Exit-Proc-Address TO ENTRY "ExitProc"
    CALL "CBL_EXIT_PROC" USING 0, Exit-Proc-Address
    IF RETURN-CODE NOT = 0
        DISPLAY 'Error: Could not register Exit Procedure'
    END-IF
    .
099-Now-Test-Exit-Proc.
    DISPLAY
        'Executing a STOP RUN...'
    END-DISPLAY
    GOBACK.
END PROGRAM demoexitproc.

IDENTIFICATION DIVISION.
PROGRAM-ID. ExitProc.
DATA DIVISION.
WORKING-STORAGE SECTION.
01  Display-Date                PIC XXXX/XX/XX.
01  Display-Time                PIC XX/XX/XX.
01  Now                         PIC X(8).
01  Today                       PIC X(8).
PROCEDURE DIVISION.
000-Main.
    DISPLAY '*** STOP RUN has been executed ***'
    ACCEPT Today FROM DATE YYYYMMDD
    ACCEPT Now   FROM TIME
    MOVE Today TO Display-Date
    MOVE Now   TO Display-Time
    INSPECT Display-Time REPLACING ALL '/' BY ':'
    DISPLAY '***    ' Display-Date '  ' Display-Time '    ***'
    GOBACK.
END PROGRAM ExitProc.

@end example
@comment *********************************************************************
@comment ** 8.3.27 CBL_FLUSH_FILE                                           **
@comment *********************************************************************
@newsubsection{8.3.27,CBL_FLUSH_FILE}
@diagram{CBL_FLUSH_FILE Built-In Subroutine,SS-CBL_FLUSH_FILE,SS-CBL_FLUSH_FILE,None}@p In Micro Focus COBOL, calling this subroutine flushes any as-yet unwritten memory buffers for the (output) file whose file-handle is specified as the argument to disk.
@p This routine is non-functional in GnuCOBOL.  It exists only to provide compatibility for applications that may have been developed for Micro Focus COBOL.
@comment *********************************************************************
@comment ** 8.3.28 CBL_GC_FORK                                             **
@comment *********************************************************************
@newsubsection{8.3.28,CBL_GC_FORK}
@diagram{CBL_GC_FORK Built-In Subroute,SS-CBL_GC_FORK,SS-CBL_GC_FORK,None}
@p CBL_GC_FORK allows you to fork the current COBOL process to a new one.
@p The current content of the process’ storage (including LOCAL-STORAGE) will be identical, any file handles get invalid in the new process, positions and file / record locks are only available to the original process.
@p This system routine is not available on Windows (exception: GCC on Cygwin).
@p Parameters: none Returns: PID (the child process gets ’0’ returned, the calling process gets the PID of the created children).
@p Negative values are returned for system dependand error codes and -1 if the function is not available on the current system.
@p @example

CBL_GC_FORK allows you to fork the current COBOL process to a new one. The
current content of the process’ storage (including LOCAL-STORAGE) will be
identical, any file handles get invalid in the new process, positions and
file / record locks are only available to the original process.
This system routine is not available on Windows (exception: GCC on Cygwin).
Parameters: none Returns: PID (the child process gets ’0’ returned, the calling
process gets the PID of the created children). Negative values are returned for
system dependand error codes and -1 if the function is not available on the
current system.

 IDENTIFICATION DIVISION.
 PROGRAM-ID. prog.
 DATA DIVISION.
 WORKING-STORAGE SECTION.
 01  CHILD-PID      PIC S9(9) BINARY.
 01  WAIT-STS       PIC S9(9) BINARY.
 PROCEDURE DIVISION.
     CALL     "CBL_GC_FORK" RETURNING CHILD-PID END-CALL
     EVALUATE TRUE
              WHEN CHILD-PID = ZERO
                   PERFORM CHILD-CODE
              WHEN CHILD-PID > ZERO
                   PERFORM PARENT-CODE
              WHEN CHILD-PID = -1
                   DISPLAY ’CBL_GC_FORK is not available on the current'
                   ' system!’
                   PERFORM CHILD-CODE
                   MOVE 0 TO CHILD-PID
                   PERFORM PARENT-CODE
              WHEN OTHER
                   MULTIPLY CHILD-PID BY -1 END-MULTIPLY
                   DISPLAY ’CBL_GC_FORK returned system error: ’ CHILD-PID
     END-EVALUATE
     STOP     RUN.
 CHILD-CODE.
     CALL     "C$SLEEP" USING 1 END-CALL
     DISPLAY  "Hello, I am the child"
     MOVE     2 TO RETURN-CODE
 PARENT-CODE.
     DISPLAY  "Hello, I am the parent"
     CALL     "CBL_GC_WAITPID" USING CHILD-PID RETURNING WAIT-STS
     MOVE     0 TO RETURN-CODE
     EVALUATE TRUE
              WHEN WAIT-STS >= 0
                   DISPLAY ’Child ended with status: ’ WAIT-STS
              WHEN WAIT-STS = -1
                   DISPLAY ’CBL_GC_WAITPID is not available on the '
                   'current system!’
              WHEN WAIT-STS < -1
                   MULTIPLY -1 BY WAIT-STS END-MULTIPLY
                   DISPLAY ’CBL_GC_WAITPID returned system error: ’ WAIT-STS
     END-EVALUATE

@end example
@comment *********************************************************************
@comment ** 8.3.29 CBL_GC_GETOPT                                           **
@comment *********************************************************************
@newsubsection{8.3.29,CBL_GC_GETOPT}
@diagram{CBL_GC_GETOPT Built-In Subroutine,SS-CBL_GC_GETOPT,SS-CBL_GC_GETOPT,None}
@p CBL_GC_GETOPT realises the quite well-known option parser, getopt, for GnuCOBOL.
@p The usage of this system routine is described by the following example.
@p @example

 IDENTIFICATION DIVISION.
 PROGRAM-ID. PROG.
 DATA DIVISION.
 WORKING-STORAGE SECTION.
 78  SHORTOPTIONS VALUE "jkl".
 01  LONGOPTIONS.
     05 OPTIONRECORD OCCURS 2 TIMES.
        10  OPTIONNAME   PIC X(25).
        10  HAS-VALUE    PIC 9.
        10  VALPOINT     POINTER VALUE NULL.
        10  RETURN-VALUE PIC X(4).
 01  LONGIND             PIC 99.
 01  LONG-ONLY           PIC 9 VALUE 1.
 01  RETURN-CHAR         PIC X(4).
 01  OPT-VAL             PIC X(10).
 01  COUNTER             PIC 9 VALUE 0.

We first need to define the necessary fields for getopt’s shortoptions (so),
longoptions (lo), longoption index (longind), long-only-option (long-only)
and also the fields for return values return-char and opt-val (arbitrary
size with trimming, see return codes).
The shortoptions are written down as an alphanumeric field (i.e., a string
with arbitrary size) as follows:
"ab:c::d"

This means we want getopt to look for shortoptions named a, b, c or d and
we demand an option value for b and we are accepting an optional one for c.
The longoptions are defined as a table of records with oname, has-value,
 valpoint and val.

oname defines the name of a longoption.
 has-value defines if an option value is demanded (has-val = 1), optional
 (has-val = 2) or not required (has-val = 0).
valpoint is a pointer used to specify an address to save getopt’s return
 value to. The pointer is optional. If it is NULL, getopt returns a value
 as usual. If you use the pointer it has to point to a PIC X(4) field.
The field val is a PIC X(4) character which is returned if the longoption
 was recognized.

The longoption structure is immutable! You can only vary the number of
records.
Now we have the tools to run CBL_GC_GETOPT within the procedure division.

PROCEDURE DIVISION.
     MOVE     "version" to OPTIONNAME (1).
     MOVE     0 TO HAS-VALUE (1).
     MOVE     "V" TO RETURN-VALUE (1).
     MOVE     "verbose" TO OPTIONNAME (2).
     MOVE     0 TO HAS-VALUE (2).
     MOVE     "V" TO RETURN-VALUE (2).
     PERFORM  WITH TEST AFTER UNTIL RETURN-CODE = -1
              CALL ’CBL_GC_GETOPT’ USING
                  BY REFERENCE SHORTOPTIONS LONGOPTIONS LONGIND
                  BY VALUE LONG-ONLY
                  BY REFERENCE RETURN-CHAR OPT-VAL
              END-CALL
              DISPLAY RETURN-CHAR END-DISPLAY
              DISPLAY OPT-VAL END-DISPLAY
     END-PERFORM
     STOP RUN.

The example shows how we initialize all parameters and call the routine until
CBL_GC_GETOPT runs out of options and returns -1.
The return-char might contain the following:
regular character if an option was recognized
 ’ ?’ if we have an undefined or ambiguous option
 ’1’  if we have a non-option (only if first byte of so is ’-’)
 ’0’  if valpoint != NULL and we are writing the return value to the specified
      address
 ’-1’ if we don’t have any more options (or reach the first non-option if first
      byte of so is ’+’)

The return-codes of CBL_GC_GETOPT are:
 1 if we’ve got a non-option (only if first byte of so is ’-’)
 0 if valpoint != NULL and we are writing the return value to the specified
   address
-1 if we don’t have any more options (or reach the first non-option if first
   byte of so is ’+’)
 2 if we have got an truncated option value in opt-val (because opt-val was
   too small)
 3 if we got a regular answer from getopt

@end example
@comment *********************************************************************
@comment ** 8.3.30 CBL_GC_HOSTED                                           **
@comment *********************************************************************
@newsubsection{8.3.30,CBL_GC_HOSTED}
@diagram{CBL_GC_HOSTED Built-In Subroutine,SS-CBL_GC_HOSTED,SS-CBL_GC_HOSTED,None}
@p @example
CBL_GC_HOSTED provides access to the following C hosted variables:
 argc to binary-long by value
 argv to pointer to char **
 stdin, stdout, stderr to pointer
 errno giving address of errno in pointer to binary-long, use based for more
   direct access and conditional access to the following variables:
tzname pointer to pointer to array of two char pointers
timezone C long, will be seconds west of UTC
daylight C int, will be 1 during daylight savings

System will need to HAVE TIMEZONE defined for these to return anything
meaningful.
Attempts made when they are not available WILL return 1 from CBL GC HOSTED.

It returns 0 when match, 1 on failure, case matters as does length, "arg"
won’t match.
The usage of this system routine is described by the following example.

 IDENTIFICATION DIVISION.
 PROGRAM-ID. HOSTED.
 DATA DIVISION.
 WORKING-STORAGE SECTION.
 01  Argc        BINARY-LONG.
 01  Argv        POINTER.
 01  Stdin       POINTER.
 01  Stdout      POINTER.
 01  Stderr      POINTER.
 01  Errno       POINTER.
 01  Err         BINARY-LONG BASED.
 01  Domain      FLOAT-LONG VALUE 3.0.
 01  Tzname      POINTER.
 01  Tznames     POINTER BASED.
     05  Tzs     POINTER OCCURS 2.
 01  Timezone    BINARY-LONG.
 01  Daylight    BINARY-SHORT.
*>
 PROCEDURE DIVISION.
     call     "CBL_GC_HOSTED" using stdin "stdin"
     display  "stdin : " stdin
     call     "feof" using by value stdin
     display  "feof stdin : " return-code
     call     "CBL_GC_HOSTED" using stdout "stdout"
     display  "stdout : " stdout
     call     "fprintf" using by value stdout by content "Hello" & x"0a"
     call     "CBL_GC_HOSTED" using stderr "stderr"
     display  "stderr : " stderr
     call     "fprintf" using by value stderr by content "on err" & x"0a"
     call     "CBL_GC_HOSTED" using argc "argc"
     display  "argc : " argc
     call     "CBL_GC_HOSTED" using argv "argv"
     display  "argv : " argv
     call     "args" using by value argc argv
     call     "CBL_GC_HOSTED" using errno "errno"
     display  "&errno : " errno
     set      address of err to errno
     display  "errno : " err
     call     "acos" using by value domain
     display  "errno after acos(3.0): " err ", EDOM is 33"
     call     "CBL_GC_HOSTED" using argc "arg"
     display  "’arg’ lookup : " return-code
     call     "CBL_GC_HOSTED" using null "argc"
     display  "null with argc : " return-code
     display  "argc is still : " argc
*> the following only returns zero if the system has HAVE_TIMEZONE set
     call     "CBL_GC_HOSTED" using daylight "daylight "
     display  "’timezone’ lookup : " return-code
     if       return-code not = 0
              display "system doesn’t has timezone"
     else
              display "timezone is : " timezone
              call "CBL_GC_HOSTED" using daylight "daylight "
              display "’daylight’ lookup : " return-code
              display "daylight is : " daylight
              set environment "TZ" to "PST8PDT"
              call static "tzset" returning omitted on exception
                        continue end-call
              call "CBL_GC_HOSTED" using tzname "tzname"
              display "’tzname’ lookup : " return-code
*> tzs(1) will point to z"PST" and tzs(2) to z"PDT"
              if   return-code equal 0 and tzname not equal null then
                   set address of tznames to tzname
                   if   tzs(1) not equal null then
                        display "tzs #1 : " tzs(1)
                   end-if
                   if   tzs(2) not equal null then
                        display "tzs #2 : " tzs(2)
                   end-if
              end-if
     end-if
     goback.
 end program hosted.

@end example
@p Note that the legacy name of this routine that starts with CBL_OC is deprecated, as is NANOSLEEP but will still work. It is recommended that all libary routines names starting with CBL_OC are replaced with CBL_GC to minimise issues.
@comment *********************************************************************
@comment ** 8.3.31 CBL_GC_NANOSLEEP                                        **
@comment *********************************************************************
@newsubsection{8.3.31,CBL_GC_NANOSLEEP}
@diagram{CBL_GC_NANOSLEEP Built-In Subroutine,SS-CBL_GC_NANOSLEEP,SS-CBL_GC_NANOSLEEP,None}@p This subroutine puts the program to sleep for the specified number of nanoseconds.
@p The effective granularity of @term{nanoseconds-to-sleep} values will depend upon the granularity of the system clock your computer is using and the timing granularity of the operating system that computer is running.
@p For example, You will not expect to see any difference whatsoever between values of 1, 100, 500 or 1000, but you should see a difference between values such as 250000000 and 500000000.
@p The @term{nanoseconds-to-sleep} argument is a numeric literal or data item.
@p There are one BILLION nanoseconds in a second, so if you wanted to put the program to sleep for 1/4 second you'd use a @term{nanoseconds-to-sleep} value of 250000000.
@p Note that the legacy name of this routine starts with CBL_OC is deprecated, as is HOSTED but will still work. It is recommended that all libary routines names starting with CBL_OC are replaced with CBL_GC to minimise issues.
@comment *********************************************************************
@comment ** 8.3.32 CBL_GC_PRINTABLE                                        **
@comment *********************************************************************
@newsubsection{8.3.32,CBL_GC_PRINTABLE}
@diagram{CBL_GC_PRINTABLE Built-In Subroutine,SS-CBL_GC_PRINTABLE,SS-CBL_GC_PRINTABLE,None}
@p The @syntax{CBL_GC_PRINTABLE} subroutine converts the contents of the data-item specified as the first argument to printable characters.
@p Those characters that are deemed printable (as defined by the character set used by @term{data-item}) will remain unchanged, while those that are NOT printable will be converted to the character specified as the second argument.
@p If no @term{char} argument is provided, a period (".") will be used.
@comment *********************************************************************
@comment ** 8.3.33 CBL_GC_WAITPID                                          **
@comment *********************************************************************
@newsubsection{8.3.33,CBL_GC_WAITPID}
@diagram{CBL_GC_WAITPID Built-In Subroutine,SS-CBL_GC_WAITPID,SS-CBL_GC_WAITPID,None}
@p @example
CBL_GC_WAITPID allows you to wait until another system process ended.
Additional you can check the process’ return code.
Parameters: none Returns: function-status / child-status Negative values
are returned for system dependand error codes and -1 if the function is not
available on the current system.

     CALL     "CBL_GC_WAITPID" USING CHILD-PID RETURNING WAIT-STS
     MOVE     0 TO RETURN-CODE
     DISPLAY  ’CBL_GC_WAITPID ended with status: ’ WAIT-STS

@end example
@comment *********************************************************************
@comment ** 8.3.34 CBL_GET_CSR_POS                                          **
@comment *********************************************************************
@newsubsection{8.3.34,CBL_GET_CSR_POS}
@diagram{CBL_GET_CSR_POS Built-In Subroutine,SS-CBL_GET_CSR_POS,SS-CBL_GET_CSR_POS,None}@p This subroutine will retrieve the current cursor location on the screen, returning a 2-byte value into the supplied @term{cursor-locn-buffer}.  The first byte of @term{cursor-locn-buffer} will receive the current line (row) location while the second receives the current column location.
@p The returned location data will be in binary form, and will be based upon starting values of 0, meaning that if the cursor is located at line 15, column 12 at the time this routine is called, a value of (14,11) will be returned.
@p The following is a typical @term{cursor-locn-buffer} definition:
@p @example
01  CURSOR-LOCN-BUFFER.
    05 CURSOR-LINE          USAGE BINARY-CHAR.
    05 CURSOR-COLUMN        USAGE BINARY-CHAR.
@end example
@* Values of 1 (Line) and 1 (column) will be returned if GnuCOBOL was not generated to include screen I/O.
@comment *********************************************************************
@comment ** 8.3.35 CBL_GET_CURRENT_DIR                                      **
@comment *********************************************************************
@newsubsection{8.3.35,CBL_GET_CURRENT_DIR}
@diagram{CBL_GET_CURRENT_DIR Built-In Subroutine,SS-CBL_GET_CURR_DIR,SS-CBL_GET_CURR_DIR,None}@p This retrieves the fully-qualified pathname of the current directory, saving up to @term{length} characters of that name into the specified @term{buffer}.
@p The first argument is unused, but must be specified.  It must be specified @syntaxrefalt{BY VALUE,CALL}.
@p The @term{length} argument must be specified @syntax{BY VALUE}.
The @term{buffer} argument must be specified @syntax{BY REFERENCE}.
@p The value specified for the @term{length} argument (a numeric literal or data item) should not exceed the actual length of the @term{buffer} argument.
@p If the value specified for the @term{length} argument is LESS THAN the actual length of the @term{buffer} argument, the current directory path will be left-justified and space filled within the first @term{length} bytes of @term{buffer} --- any bytes in @term{buffer} after that point will be unchanged.
@p If the routine is successful, a value of 0 will be returned to the @registerref{RETURN-CODE}.  If the routine failed because of a problem with an argument (such as a negative or 0 length), a value of 128 will result.  Finally, if the 1st argument value is anything but zero, the routine will fail with a 129 value.
@comment *********************************************************************
@comment ** 8.3.36 CBL_GET_SCR_SIZE                                         **
@comment *********************************************************************
@newsubsection{8.3.36,CBL_GET_SCR_SIZE}
@diagram{CBL_GET_SCR_SIZE Built-In Subroutine,SS-CBL_GET_SCR_SIZE,SS-CBL_GET_SCR_SIZE,None}@p Use this subroutine to retrieve the current console screen size.
@p When the system is running in a windowed environment, this will be the sizing of the console window in which the program is executing.  When the system is not running a windowing environment, the physical console screen attributes will be returned.  In environments such as a Windows console window, where the logical size of the window may far exceed that of the physical console window, the size returned will be that of the physical console window.  Two one-byte values will be returned --- the first will be the current number of lines (rows) while the second will be the number of columns.
@p The returned size data will be in binary form.
@p The following are typical @term{no-of-lines} and @term{no-of-columns} definitions:
@p @example
01  NO-OF-LINES             USAGE BINARY-CHAR.
01  NO-OF-COLUMNS           USAGE BINARY-CHAR.
@end example
@* GnuCOBOL run-time screen management must have been initialized prior to CALLing this routine in order to receive meaningful values.  This means that a @statementref{DISPLAY screen-data-item} or a @statementref{ACCEPT screen-data-item} must have been executed prior to executing the @statement{CALL}.
@p Zero values will be returned if the screen has not been initialized and values of 24 (lines) and 80 (columns) will be returned if GnuCOBOL was not generated to include screen I/O.
@comment *********************************************************************
@comment ** 8.3.37 CBL_IMP                                                  **
@comment *********************************************************************
@newsubsection{8.3.37,CBL_IMP}
@diagram{CBL_IMP Built-In Subroutine,SS-CBL_IMP,SS-CBL_IMP,None}
@multitable @columnfractions 0.3 0.7
@item @t{@ Old @ @ @ Old @ @ @ New} @* @t{Arg 1@ @ Arg 2@ @ Arg 2} @* @t{@ Bit@ @ @ @ Bit@ @ @ @ Bit} @* @t{=====@ @ =====@ @ =====} @* @t{@ @ 0@ @ @ @ @ @ 0@ @ @ @ @ @ 1} @* @t{@ @ 0@ @ @ @ @ @ 1@ @ @ @ @ @ 1} @* @t{@ @ 1@ @ @ @ @ @ 0@ @ @ @ @ @ 0} @* @t{@ @ 1@ @ @ @ @ @ 1@ @ @ @ @ @ 1}  @tab This subroutine performs a bit-by-bit logical "implies" process between the left-most 8*@term{byte-length} corresponding bits of @term{item-1} and @term{item-2}, storing the resulting bit string into @term{item-2}.  The truth table shown to the left documents the IMP process.
 @* @* The @term{item-1} argument may be an alphanumeric literal or a data item and @term{item-2} must be a data item.  The length of both @term{item-1} and @term{item-2} must be at least 8*@term{byte-length}.
@end multitable
@* The @term{byte-length} argument may be a numeric literal or data item, and must be specified using @syntaxrefalt{BY VALUE,CALL}.
@p Any bits in @term{item-2} after the 8*@term{byte-length} point will be unaffected.
@p A result of zero will be passed back in the @registerref{RETURN-CODE}.
@comment *********************************************************************
@comment ** 8.3.38 CBL_NIMP                                                 **
@comment *********************************************************************
@newsubsection{8.3.38,CBL_NIMP}
@diagram{CBL_NIMP Built-In Subroutine,SS-CBL_NIMP,SS-CBL_NIMP,None}
@multitable @columnfractions 0.3 0.7
@item @t{@ Old @ @ @ Old @ @ @ New} @* @t{Arg 1@ @ Arg 2@ @ Arg 2} @* @t{@ Bit@ @ @ @ Bit@ @ @ @ Bit} @* @t{=====@ @ =====@ @ =====} @* @t{@ @ 0@ @ @ @ @ @ 0@ @ @ @ @ @ 0} @* @t{@ @ 0@ @ @ @ @ @ 1@ @ @ @ @ @ 0} @* @t{@ @ 1@ @ @ @ @ @ 0@ @ @ @ @ @ 1} @* @t{@ @ 1@ @ @ @ @ @ 1@ @ @ @ @ @ 0}  @tab This subroutine performs the negation of a bit-by-bit logical "implies" process between the left-most 8*@term{byte-length} corresponding bits of @term{item-1} and @term{item-2}, storing the resulting bit string into @term{item-2}.  The truth table shown to the left documents the NIMP process.
 @* @* The @term{item-1} argument may be an alphanumeric literal or a data item and @term{item-2} must be a data item.  The length of both @term{item-1} and @term{item-2} must be at least 8*@term{byte-length}.
@end multitable
@* The @term{byte-length} argument may be a numeric literal or data item, and must be specified using @syntaxrefalt{BY VALUE,CALL}.
@p Any bits in @term{item-2} after the 8*@term{byte-length} point will be unaffected.
@p A result of zero will be passed back in the @registerref{RETURN-CODE}.
@comment *********************************************************************
@comment ** 8.3.39 CBL_NOR                                                  **
@comment *********************************************************************
@newsubsection{8.3.39,CBL_NOR}
@diagram{CBL_NOR Built-In Subroutine,SS-CBL_NOR,SS-CBL_NOR,None}
@multitable @columnfractions 0.3 0.7
@item @t{@ Old @ @ @ Old @ @ @ New} @* @t{Arg 1@ @ Arg 2@ @ Arg 2} @* @t{@ Bit@ @ @ @ Bit@ @ @ @ Bit} @* @t{=====@ @ =====@ @ =====} @* @t{@ @ 0@ @ @ @ @ @ 0@ @ @ @ @ @ 1} @* @t{@ @ 0@ @ @ @ @ @ 1@ @ @ @ @ @ 0} @* @t{@ @ 1@ @ @ @ @ @ 0@ @ @ @ @ @ 0} @* @t{@ @ 1@ @ @ @ @ @ 1@ @ @ @ @ @ 0}  @tab This subroutine performs the negation of a bit-by-bit logical "or" process between the left-most 8*@term{byte-length} corresponding bits of @term{item-1} and @term{item-2}, storing the resulting bit string into @term{item-2}.  The truth table shown to the left documents the NOR process.
 @* @* The @term{item-1} argument may be an alphanumeric literal or a data item and @term{item-2} must be a data item.  The length of both @term{item-1} and @term{item-2} must be at least 8*@term{byte-length}.
@end multitable
@* The @term{byte-length} argument may be a numeric literal or data item, and must be specified using @syntaxrefalt{BY VALUE,CALL}.
@p Any bits in @term{item-2} after the 8*@term{byte-length} point will be unaffected.
@p A result of zero will be passed back in the @registerref{RETURN-CODE}.
@comment *********************************************************************
@comment ** 8.3.40 CBL_NOT                                                  **
@comment *********************************************************************
@newsubsection{8.3.40,CBL_NOT}
@diagram{CBL_NOT Built-In Subroutine,SS-CBL_NOT,SS-CBL_NOT,None}@p This subroutine "flips" the left-most 8*@term{byte-length} bits of @term{item-1}, changing 0 bits to 1s and 1s to 0s.  The changes are made directly im @term{item-1}.
@p The @term{item-1} argument must be a data item.  The length of @term{item-1} must be at least 8*@term{byte-length}.
@p The @term{byte-length} argument may be a numeric literal or data item, and must be passed using @syntaxrefalt{BY VALUE,CALL}.
@p Any bits in @term{item-1} after the 8*@term{byte-length} point will be unaffected.
@p A result of zero will be passed back in the @registerref{RETURN-CODE}.
@comment *********************************************************************
@comment ** 8.3.42 CBL_OPEN_FILE                                            **
@comment *********************************************************************
@newsubsection{8.3.42,CBL_OPEN_FILE}
@diagram{CBL_OPEN_FILE Built-In Subroutine,SS-CBL_OPEN_FILE,SS-CBL_OPEN_FILE,None}@p This routine opens an existing file for use as a byte-stream file usable by CBL_WRITE_FILE or CBL_READ_FILE.
@p The @term{file-path} argument  is an alphanumeric literal or data-item.
@p The @term{access-mode} argument is a numeric literal or data item with a PIC X USAGE COMP-X (or USAGE BINARY-CHAR) definition; it specifies how you wish to use the file, as follows:
@p @display
1 = input (read-only)
2 = output (write-only)
3 = input and/or output
@end display
@* The third and fourth arguments would specify a locking mode and device specification, respectively, but they're not implemented in GnuCOBOL (currently, at least) --- just specify each as 0.
@p The final argument (@term{handle}) is a @syntax{PIC X(4) USAGE COMP-X} item that will receive the handle to the file.  That handle is used on all other byte-stream functions to reference this specific file.
@p A @registerref{RETURN-CODE} value of -1 indicates an invalid argument, while a value of 0 indicates success.  A value of 35 means the file does not exist.
@comment *********************************************************************
@comment ** 8.3.43 CBL_OR                                                   **
@comment *********************************************************************
@newsubsection{8.3.43,CBL_OR}
@diagram{CBL_OR Built-In Subroutine,SS-CBL_OR,SS-CBL_OR,None}
@multitable @columnfractions 0.3 0.7
@item @t{@ Old @ @ @ Old @ @ @ New} @* @t{Arg 1@ @ Arg 2@ @ Arg 2} @* @t{@ Bit@ @ @ @ Bit@ @ @ @ Bit} @* @t{=====@ @ =====@ @ =====} @* @t{@ @ 0@ @ @ @ @ @ 0@ @ @ @ @ @ 0} @* @t{@ @ 0@ @ @ @ @ @ 1@ @ @ @ @ @ 1} @* @t{@ @ 1@ @ @ @ @ @ 0@ @ @ @ @ @ 1} @* @t{@ @ 1@ @ @ @ @ @ 1@ @ @ @ @ @ 1}  @tab This subroutine performs a bit-by-bit logical "or" process between the left-most 8*@term{byte-length} corresponding bits of @term{item-1} and @term{item-2}, storing the resulting bit string into @term{item-2}.  The truth table shown to the left documents the OR process.
 @* @* The @term{item-1} argument may be an alphanumeric literal or a data item and @term{item-2} must be a data item.  The length of both @term{item-1} and @term{item-2} must be at least 8*@term{byte-length}.
@end multitable
@* The @term{byte-length} argument may be a numeric literal or data item, and must be specified using @syntaxrefalt{BY VALUE,CALL}.
@p Any bits in @term{item-2} after the 8*@term{byte-length} point will be unaffected.
@p A result of zero will be passed back in the @registerref{RETURN-CODE}.
@comment *********************************************************************
@comment ** 8.3.44 CBL_READ_FILE                                            **
@comment *********************************************************************
@newsubsection{8.3.44,CBL_READ_FILE}
@diagram{CBL_READ_FILE Built-In Subroutine,SS-CBL_READ_FILE,SS-CBL_READ_FILE,None}@p This routine reads @term{nbytes} of data starting at byte number @term{offset} from the byte-stream file defined by @term{handle} into the specified @term{buffer}.
@p The @term{handle} argument (@syntax{PIC X(4) USAGE COMP-X}) must have been populated by a prior call to @subpgmref{CBL_OPEN_FILE}.
@p The @term{offset} argument (@syntax{PIC X(8) USAGE COMP-X}) defines the location in the file of the first byte to be read.  The first byte of a file is byte offset 0.
@p The @term{nbytes} argument (@syntax{PIC X(4) USAGE COMP-X}) specifies how many bytes (maximum) will be read.
If the @term{flag} argument is specified as 128, the size of the file (in bytes) will be returned into the file offset argument (argument 2) upon completion.  Not all operating system/GnuCOBOL environments may be able to retrieve file sizes  in such cases, a value of zero will be returned.  The only other valid value for flags is 0.  This argument may be specified either as a numeric literal or as a @syntax{PIC X USAGE COMP-X} data item.
@p Upon completion, the @registerref{RETURN-CODE} will be set to 0 if the read was successful or to 10 if an "end-of-file" condition occurred.  If a value of -1 is returned, a problem was identified with the subroutine arguments.
@comment *********************************************************************
@comment ** 8.3.45 CBL_RENAME_FILE                                          **
@comment *********************************************************************
@newsubsection{8.3.45,CBL_RENAME_FILE}
@diagram{CBL_RENAME_FILE Built-In Subroutine,SS-CBL_RENAME_FILE,SS-CBL_RENAME_FILE,None}@p You may use this subroutine to rename a file.
@p The file specified by @term{old-file-path} will be "renamed" to the name specified as @term{new-file-path}.  Each argument may be an alphanumeric literal or data item.
@p Despite what the name of this routine might make you believe, this routine is more than just a simple "rename" --- it will actually move the file supplied as the 1st argument to the file specified as the 2nd argument.  Think of it as a two-step sequence, first copying the @term{old-file-path} file to the @term{new-file-path} file and then a second step where the @term{old-file-path} is deleted.
@p If the attempt to move the file fails (for example, it doesn't exist), the @registerref{RETURN-CODE} will be set to 128; on successful completion it will be set to 0.
@comment *********************************************************************
@comment ** 8.3.46 CBL_TOLOWER                                              **
@comment *********************************************************************
@newsubsection{8.3.46,CBL_TOLOWER}
@diagram{CBL_TOLOWER Built-In Subroutine,SS-CBL_TOLOWER,SS-CBL_TOLOWER,None}@p This routine will convert the first @term{convert-length} (a numeric literal or data item) characters of @term{data-item} (an alpha-numeric identifier) to lower-case.
@p The @term{convert-length} argument must be specified @syntaxrefalt{BY VALUE,CALL}.  It specifies how many (leading) characters in data-item will be converted --- any characters after that will remain unchanged.
@p If @term{convert-length} is negative or zero, no conversion will be performed.
@comment *********************************************************************
@comment ** 8.3.47 CBL_TOUPPER                                              **
@comment *********************************************************************
@newsubsection{8.3.47,CBL_TOUPPER}
@diagram{CBL_TOUPPER Built-In Subroutine,SS-CBL_TOUPPER,SS-CBL_TOUPPER,None}@p This routine will convert the first @term{convert-length} (a numeric literal or data item) characters of @term{data-item} (an alpha-numeric identifier) to upper-case.
@p The @term{convert-length} argument must be specified @syntaxrefalt{BY VALUE,CALL}.  It specifies how many (leading) characters in data-item will be converted --- any characters after that will remain unchanged.
@p If @term{convert-length} is negative or zero, no conversion will be performed.
@comment *********************************************************************
@comment ** 8.3.48 CBL_WRITE_FILE                                           **
@comment *********************************************************************
@newsubsection{8.3.48,CBL_WRITE_FILE}
@diagram{CBL_WRITE_FILE Built-In Subroutine,SS-CBL_WRITE_FILE,SS-CBL_WRITE_FILE,None}@p This routine writes @term{nbytes} of data from the specified @term{buffer} to the byte-stream file defined by @term{handle} starting at byte number @term{offset} within the file.
@p The @term{handle} argument (@syntax{PIC X(4) USAGE COMP-X}) must have been populated by a prior call to CBL_OPEN_FILE.
The offset argument (@syntax{PIC X(4) USAGE COMP-X}) defines the location in the file of the first byte to be written to.  The first byte of a file is byte offset 0.
@p The @term{nbytes} argument (@syntax{PIC X(4) USAGE COMP-X}) specifies how many bytes (maximum) will be written.
@p Currently, the only allowable value for the flags argument is 0.  This argument may be specified either as a numeric literal or as a @syntax{PIC X(1) USAGE COMP-X} data item.
@p Upon completion, the @registerref{RETURN-CODE} will be set to 0 if the write was successful or to 30 if an I/O error condition occurred.  If a value of -1 is returned, a problem was identified with the subroutine arguments.
@comment *********************************************************************
@comment ** 8.3.49 CBL_XOR                                                  **
@comment *********************************************************************
@newsubsection{8.3.49,CBL_XOR}
@diagram{CBL_XOR Built-In Subroutine,SS-CBL_XOR,SS-CBL_XOR,None}
@multitable @columnfractions 0.3 0.7
@item @t{@ Old @ @ @ Old @ @ @ New} @* @t{Arg 1@ @ Arg 2@ @ Arg 2} @* @t{@ Bit@ @ @ @ Bit@ @ @ @ Bit} @* @t{=====@ @ =====@ @ =====} @* @t{@ @ 0@ @ @ @ @ @ 0@ @ @ @ @ @ 0} @* @t{@ @ 0@ @ @ @ @ @ 1@ @ @ @ @ @ 1} @* @t{@ @ 1@ @ @ @ @ @ 0@ @ @ @ @ @ 1} @* @t{@ @ 1@ @ @ @ @ @ 1@ @ @ @ @ @ 0}  @tab This subroutine performs a bit-by-bit logical "exclusive or" process between the left-most 8*@term{byte-length} corresponding bits of @term{item-1} and @term{item-2}, storing the resulting bit string into @term{item-2}.  The truth table shown to the left documents the XOR process. @* @* The @term{item-1} argument may be an alphanumeric literal or a data item and @term{item-2} must be a data item.  The length of both @term{item-1} and @term{item-2} must be at least 8*@term{byte-length}.
@end multitable
@* The @term{byte-length} argument may be a numeric literal or data item, and must be specified using @syntaxrefalt{BY VALUE,CALL}.
@p Any bits in @term{item-2} after the 8*@term{byte-length} point will be unaffected.
@p A result of zero will be passed back in the @registerref{RETURN-CODE}.
@comment *********************************************************************
@comment ** 8.3.50 SYSTEM                                                   **
@comment *********************************************************************
@newsubsection{8.3.50,SYSTEM}
@diagram{SYSTEM Built-In Subroutine,SS-SYSTEM,SS-SYSTEM,None}@p This subroutine submits the specified @term{command} (an alphanumeric literal or data item) to a command shell for execution as if it were typed into a console/terminal window.
@p A shell will be opened subordinate to the GnuCOBOL program issuing the call to @syntax{SYSTEM}.
@p Output from the command (if any) will appear in the command window in which the GnuCOBOL program was executed.
@p On a Unix system, the shell environment will be established using the default shell program.  This is also true when using a GnuCOBOL build created with and for OSX or the Cygwin Unix emulator.
@p With native Windows Windows/MinGW builds, the shell environment will be the Windows console window command processor (usually "cmd.exe") appropriate for the version of Windows you're using.
@p To trap output from the executed command and process it within the GnuCOBOL program, use a pipe (>) to send the command output to a temporary file which you read from within the program once control returns.
@comment *********************************************************************
@comment ** 8.3.51 X"91"                                                    **
@comment *********************************************************************
@newsubsection{8.3.51,X"91"}
@diagram{X"91" Built-In Subroutine,SS-X91,SS-X91,None}@p The original Micro Focus version of this routine is capable of providing a wide variety of functions.  GnuCOBOL supports just three of them:
@itemize @bullet
@p @item Turning runtime switches (SWITCH-1, @dots{} , SWITCH-8) on.
@p @item Turning runtime switches (SWITCH-1, @dots{} , SWITCH-8) off.
@p @item Retrieving the number of arguments passed to a subroutine.
@end itemize
@* The @term{return-code} argument must be a one-byte binary numeric data item (@syntax{USAGE BINARY-CHAR} is recommended).  It will receive a value of 0 if the operation was successful, 1 otherwise.
@p The @term{function-code} argument must be either a numeric literal or a one-byte binary numeric data item (@syntax{USAGE BINARY-CHAR} is recommended).
@p The third argument --- @term{variable-arg} --- is defined differently depending upon the @term{function-code} value, as follows:
@table @asis
@p @item 11
@p Sets and/or clears all eight of the COBOL switches (SWITCH-1 through SWITCH-8).  @xref{SPECIAL-NAMES}, for an explanation of those switches.
@p The @term{variable-arg} argument should be an @syntax{OCCURS 8 TIMES} table of @syntax{USAGE BINARY-CHAR}.
@p Each occurrence that is set to a value of zero prior to the @syntax{CALL X"91"} will cause the corresponding switch to be cleared.  Each occurrence set to 1 prior to the @syntax{CALL X"91"} will cause the corresponding switch to be set.
@p Values other than 0 or 1 will be ignored.
@p @item 12
@p Reads all eight of the COBOL switches (SWITCH-1 through SWITCH-8)
@p The @term{variable-arg} argument should be an @syntax{OCCURS 8 TIMES} table of @syntax{USAGE BINARY-CHAR}.
@p Each of the 1st eight occurrences of the array will be set to either 0 or 1 --- 1 if the corresponding switch is set, 0 otherwise.
@p @item 16
@p Retrieves the number of arguments passed to the program executing the CALL X"91", saving that number into the @term{variable-arg} argument.  That should be a binary numeric data item (@syntax{USAGE BINARY-CHAR} is recommended).
@end table
@comment *********************************************************************
@comment ** 8.3.52 X"E4"                                                    **
@comment *********************************************************************
@newsubsection{8.3.52,X"E4"}
@diagram{X"E4" Built-In Subroutine,SS-XE4,SS-XE4,None}@p Use X"E4" to clear the screen.  There are no arguments and no returned value.
@comment *********************************************************************
@comment ** 8.3.53 X"E5"                                                    **
@comment *********************************************************************
@newsubsection{8.3.53,X"E5"}
@diagram{X"E5" Built-In Subroutine,SS-XE5,SS-XE5,None}@p The X"E5" routine will sound the PC "bell".  There are no arguments and no returned value.
@comment *********************************************************************
@comment ** 8.3.54 X"F4"                                                    **
@comment *********************************************************************
@newsubsection{8.3.54,X"F4"}
@diagram{X"F4" Built-In Subroutine,SS-XF4,SS-XF4,None}@p This routine packs the low-order (rightmost) bit from each of the eight 1-byte items in @term{table} into the corresponding bit positions of the single-byte data item @term{byte}.
@p The @term{byte} data item need be only a single byte in size.  If it is longer, the excess will be unaffected by this subroutine.
@p The @term{table} data item must be at least 8 bytes long.  If it is longer, the excess will be ignored by this subroutine.
@p Typically, table is defined similarly to the following:
@p @example
01  Table-Arg.
    05 Each-Byte OCCURS 8 TIMES USAGE BINARY-CHAR.
@end example
@comment *********************************************************************
@comment ** 8.3.55 X"F5"                                                    **
@comment *********************************************************************
@newsubsection{8.3.55,X"F5"}
@diagram{X"F5" Built-In Subroutine,SS-XF5,SS-XF5,None}@p This routine unpacks each bit of the single-byte data item @term{byte} into the low-order (rightmost) bit of each of the corresponding eight 1-byte items in @term{table}.  The other seven bit positions of each of the first eight entries in @term{table} will be set to zero.
@p The @term{byte} data item need be only a single byte in size.  If it is longer, the excess will be unaffected by this subroutine.
@p The @term{table} data item must be at least 8 bytes long.  If it is longer, the excess will be ignored by this subroutine.
@p Typically, table is defined similarly to the following:
@p @example
01  Table-Arg.
    05 Each-Byte OCCURS 8 TIMES USAGE BINARY-CHAR.
@end example
@comment *********************************************************************
@comment ** 8.4 Binary Truncation                                           **
@comment *********************************************************************
@newsection{8.4,Binary Truncation}@p By default, the GnuCOBOL compiler will truncate binary data items to the precision indicated by their @syntaxref{PICTURE} clause, if they have one. This applies to COMP, BINARY and COMP-4 items Only.
@* The fact is, however, that binary truncation has a significant effect on the performance of GnuCOBOL programs.  When binary truncation is in effect, arithmetic operations performed against all types of numeric data items (even @syntax{USAGE DISPLAY}) are slowed down.
@p Before continuing, it's worth making the point that we're NOT talking about astronomical performance degradations here.  Today's computers are FAST, and a user sitting at the keyboard, running a GnuCOBOL program is unlikely to notice.  BUT @dots{} if you have a GnuCOBOL program that has to process large amounts of data, performing some significant "number crunching" against that data as it goes, the impact of truncation could become noticeable.
@p The following program compares the performance of performing arithmetic operations (in a totally non-scientific, non-rigorous way) against data items with a @syntaxref{USAGE} of @syntax{DISPLAY}, @syntax{COMP} and @syntax{BINARY-LONG}.  It was actually my intent when I first wrote the program to merely demonstrate the relative performance differences between different types of numeric data storage, and it certainly met that objective.
@p @example
IDENTIFICATION DIVISION.
PROGRAM-ID. DEMOMATH.
DATA DIVISION.
WORKING-STORAGE SECTION.
01  Begin-Time.
    05 BT-HH                    PIC 9(2).
    05 BT-MM                    PIC 9(2).
    05 BT-SS                    PIC 9(2).
    05 BT-HU                    PIC 9(2).
01  Binary-Item         BINARY-LONG SIGNED VALUE 0.
01  Comp-Item           COMP    PIC S9(9)  VALUE 0.
01  Display-Item        DISPLAY PIC S9(9)  VALUE 0.
01  End-Time.
    05 ET-HH                    PIC 9(2).
    05 ET-MM                    PIC 9(2).
    05 ET-SS                    PIC 9(2).
    05 ET-HU                    PIC 9(2).
78  Repeat-Count                VALUE 10000000.
01  Time-Diff                   PIC ZZ9.99.
PROCEDURE DIVISION.
010-Test-Usage-DISPLAY.
    ACCEPT  Begin-Time FROM TIME
    PERFORM Repeat-Count TIMES
        ADD 7 TO Display-Item
    END-PERFORM
    PERFORM 100-Determine-Time-Diff
    DISPLAY 'USAGE DISPLAY: ' Time-Diff ' SECONDS'
    .
020-Test-Usage-COMP.
    ACCEPT Begin-Time FROM TIME
    PERFORM Repeat-Count TIMES
        ADD 7 TO Comp-Item
    END-PERFORM
    PERFORM 100-Determine-Time-Diff
    DISPLAY 'USAGE COMP:    ' Time-Diff ' SECONDS'
    .
040-Test-Usage-BINARY.
    ACCEPT Begin-Time FROM TIME
    PERFORM Repeat-Count TIMES
        ADD 7 TO Binary-Item
    END-PERFORM
    PERFORM 100-Determine-Time-Diff
    DISPLAY 'USAGE BINARY:  ' Time-Diff ' SECONDS'
    .
099-Done.
    STOP RUN
    .
100-Determine-Time-Diff.
    ACCEPT End-Time FROM TIME
    COMPUTE Time-Diff =
      ( (ET-HH * 360000 + ET-MM * 6000 + ET-SS * 100 + ET-HU)
      - (BT-HH * 360000 + BT-MM * 6000 + BT-SS * 100 + BT-HU) )
      / 100
    .
@end example
@* Each data item has 7 added to it ten @i{million} times.
@p The time (to one-one-hundredth of a second) will be retrieved before and after each test and the difference between the two is displayed.  This is why the computations were done so many times --- it was to make sure the timing was "measurable" with only a 1/100 second "stopwatch".
@p I also ran the tests multiple times, just to make sure I had consistent results (I did).  Like I mentioned earlier, this is not a rigorous, scientific benchmark of numeric performance; it's just a quick-and-dirty comparison.
@p Here are the results:
@p @example
Test 1:
USAGE DISPLAY:   1.72 SECONDS
USAGE COMP:      0.62 SECONDS
USAGE BINARY:    0.02 SECONDS

Test 2:
USAGE DISPLAY:   1.69 SECONDS
USAGE COMP:      0.61 SECONDS
USAGE BINARY:    0.02 SECONDS

Test 3:
USAGE DISPLAY:   1.69 SECONDS
USAGE COMP:      0.65 SECONDS
USAGE BINARY:    0.02 SECONDS
@end example
@* The results I saw here were consistent with those that would have been obtained from most of the COBOL implementations I have ever worked with --- @syntax{USAGE COMP} has a significant performance advantage over @syntax{USAGE DISPLAY} and @syntax{USAGE BINARY-LONG} (and presumably the other @syntax{BINARY-@i{xxx}} usages as well) perform identically, within the measurement tolerances of the test.
@p Imagine my surprise, however, when I discovered that the use of @switch{-fnotrunc} also made a difference:
@p @example
Test 4:
USAGE DISPLAY:   1.72 SECONDS
USAGE COMP:      0.07 SECONDS
USAGE BINARY:    0.02 SECONDS

Test 5:
USAGE DISPLAY:   1.72 SECONDS
USAGE COMP:      0.07 SECONDS
USAGE BINARY:    0.02 SECONDS

Test 6:
USAGE DISPLAY:   1.73 SECONDS
USAGE COMP:      0.06 SECONDS
USAGE BINARY:    0.02 SECONDS
@end example
@* As you can see, there was a huge drop in @syntax{USAGE COMP} timings by turning off truncation.  As a result, I see absolutely no reason whatsoever why the @switch{-fnotrunc} option shouldn't be used on all GnuCOBOL compilations.
@p If you want to squeeze every last bit of performance out of your GnuCOBOL programs, don't forget to investigate the @switchidx{-O}, @switchidx{-O2} and the @switchidx{-Os}, all of which influence the optimization of compiled code.  Actually run programs using various optimization switches (or not) and compare execution times against those of unoptimized compiled versions of your programs.  Don't just compare the generated C code because sometimes the differences can't be "seen" at the C source-code level.
@p @example
Test 7:
cobc -x demomath.cbl -O2;demomath
USAGE DISPLAY:   1.68 SECONDS
USAGE COMP:      0.60 SECONDS
USAGE BINARY:    0.00 SECONDS

Test 8:
cobc -x demomath.cbl -fnotrunc -O2;demomath
USAGE DISPLAY:   1.67 SECONDS
USAGE COMP:      0.01 SECONDS
USAGE BINARY:    0.00 SECONDS
@end example
@* All tests above carried out under Linux with a AMD FX8350 under very low loading prior to the test. I would have also tried on a i7-7700 but that is under Windows 10 and I do not have a GC version on it - Vince.
@iftex
@sp 3
@center ------------------------------------------------------------
@center End of Chapter 8 --- Interfacing With The OS
@end iftex
